<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeX Platform - Trade Flow Demo</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="images/logo-gsw.svg">
    <link rel="alternate icon" href="favicon.ico">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* Microsoft Blue Color Palette */
        :root {
            --ms-blue-dark: #0078d4;
            --ms-blue-primary: #0091ff;
            --ms-blue-light: #50e6ff;
            --ms-blue-accent: #00bcf2;
            --ms-navy: #002050;
            --ms-navy-light: #003366;
            --tex-gradient: linear-gradient(135deg, #0078d4, #00bcf2);
            --external-color: #d83b01;
            --downstream-color: #107c10;
            --reporting-color: #ffb900;
            --internal-color: #5c2d91;
            /* Retail specific colors */
            --retail-orange: #ff6b35;
            --retail-green: #2ecc71;
            --retail-purple: #9b59b6;
            --retail-teal: #1abc9c;
            --retail-red: #e74c3c;
            /* AI specific colors */
            --ai-purple: #7c3aed;
            --ai-pink: #ec4899;
            --ai-blue: #3b82f6;
            --ai-teal: #14b8a6;
            --ai-orange: #f97316;
            --ai-green: #22c55e;
            --ai-gradient: linear-gradient(135deg, #7c3aed, #ec4899);
            /* Vibe Coding colors */
            --vibe-orange: #f97316;
            --vibe-yellow: #fbbf24;
            --vibe-gradient: linear-gradient(135deg, #f97316, #fbbf24);
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(180deg, #f3f2f1 0%, #e1dfdd 100%); min-height: 100vh; color: #323130; }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }

        header { text-align: center; margin-bottom: 2rem; padding: 1.5rem; background: var(--tex-gradient); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,120,212,0.3); }
        header h1 { font-size: 3rem; color: white; font-weight: 600; letter-spacing: 2px; }
        header p { font-size: 1.1rem; color: rgba(255,255,255,0.9); margin-top: 0.5rem; letter-spacing: 1px; }

        .demo-title { text-align: center; margin-bottom: 2rem; }
        .demo-title h2 { font-size: 1.6rem; color: var(--ms-blue-dark); margin-bottom: 0.5rem; font-weight: 600; }
        .demo-title p { color: #605e5c; }

        /* Ikasan-style Flow Container */
        .flow-container {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e1dfdd;
        }

        .flow-row {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
            gap: 0;
        }

        /* Ikasan-style Component Boxes */
        .component {
            display: flex;
            align-items: center;
            position: relative;
        }

        .component-box {
            background: white;
            border: 2px solid var(--ms-blue-dark);
            border-radius: 6px;
            padding: 0.8rem 1.2rem;
            min-width: 160px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,120,212,0.15);
        }

        .component-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,120,212,0.25);
        }

        .component-box .component-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 0.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: var(--tex-gradient);
            color: white;
        }

        .component-box h3 {
            font-size: 0.85rem;
            font-weight: 600;
            color: #323130;
            margin-bottom: 0.2rem;
        }

        .component-box p {
            font-size: 0.7rem;
            color: #605e5c;
        }

        .component-box .type-badge {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--ms-blue-dark);
            color: white;
            font-size: 0.6rem;
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Component Types */
        .component-box.external { border-color: var(--external-color); }
        .component-box.external .component-icon { background: linear-gradient(135deg, var(--external-color), #ff6f47); }
        .component-box.external .type-badge { background: var(--external-color); }

        .component-box.consumer { border-color: var(--ms-blue-dark); }
        .component-box.consumer .component-icon { background: var(--tex-gradient); }
        .component-box.consumer .type-badge { background: var(--ms-blue-dark); }

        .component-box.converter { border-color: #0078d4; border-style: dashed; }
        .component-box.converter .component-icon { background: linear-gradient(135deg, #0078d4, #50e6ff); }
        .component-box.converter .type-badge { background: #0078d4; }

        .component-box.router { border-color: var(--ms-blue-accent); border-width: 3px; }
        .component-box.router .component-icon { background: linear-gradient(135deg, #00bcf2, #50e6ff); }
        .component-box.router .type-badge { background: var(--ms-blue-accent); }

        .component-box.producer { border-color: var(--downstream-color); }
        .component-box.producer .component-icon { background: linear-gradient(135deg, var(--downstream-color), #5cb85c); }
        .component-box.producer .type-badge { background: var(--downstream-color); }

        .component-box.reporting { border-color: var(--reporting-color); }
        .component-box.reporting .component-icon { background: linear-gradient(135deg, var(--reporting-color), #ffd700); }
        .component-box.reporting .type-badge { background: #d39400; color: white; }

        .component-box.internal { border-color: var(--internal-color); }
        .component-box.internal .component-icon { background: linear-gradient(135deg, var(--internal-color), #8661c5); }
        .component-box.internal .type-badge { background: var(--internal-color); }

        /* Ikasan-style Connectors/Arrows */
        .connector {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px;
            position: relative;
        }

        .connector-line {
            height: 3px;
            width: 40px;
            background: var(--ms-blue-dark);
            position: relative;
        }

        .connector-line::after {
            content: '';
            position: absolute;
            right: -6px;
            top: -4px;
            border: 6px solid transparent;
            border-left: 8px solid var(--ms-blue-dark);
        }

        .connector-down {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.3rem 0;
        }

        .connector-down .line {
            width: 3px;
            height: 30px;
            background: var(--ms-blue-dark);
        }

        .connector-down .arrow {
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 10px solid var(--ms-blue-dark);
        }

        /* TeX Hub Special Styling */
        .tex-hub {
            background: linear-gradient(135deg, var(--ms-navy), var(--ms-navy-light));
            border: 3px solid var(--ms-blue-primary);
            min-width: 300px;
            padding: 1.2rem 1.5rem;
            box-shadow: 0 4px 20px rgba(0,120,212,0.3);
        }

        .tex-hub h3 { color: white; font-size: 1rem; }
        .tex-hub p { color: rgba(255,255,255,0.8); }
        .tex-hub .component-icon {
            background: white;
            color: var(--ms-blue-dark);
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
        }
        .tex-hub .type-badge { background: var(--ms-blue-light); color: var(--ms-navy); }

        /* Distribution Row */
        .distribution-row {
            display: flex;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .distribution-branch {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* TeX Platform Container */
        .tex-platform-container {
            background: linear-gradient(135deg, rgba(0,120,212,0.08) 0%, rgba(0,188,242,0.08) 100%);
            border: 2px solid var(--ms-blue-dark);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 0.5rem 0;
            position: relative;
        }

        .platform-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(0,120,212,0.3);
        }

        .platform-logo {
            font-size: 1.5rem;
            background: var(--tex-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .platform-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--ms-blue-dark);
            letter-spacing: 1px;
        }

        .platform-subtitle {
            font-size: 0.75rem;
            color: #605e5c;
            margin-left: auto;
        }

        /* TeX Internal Flow */
        .tex-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .inbound-flow {
            padding-bottom: 1rem;
            border-bottom: 1px dashed rgba(0,120,212,0.3);
        }

        /* Topic Container */
        .topic-container {
            display: flex;
            justify-content: center;
            margin: 1.5rem 0;
            padding: 15px 0;
        }

        .topic-box {
            position: relative;
            width: 220px;
            height: 70px;
            background: linear-gradient(to bottom, #8661c5 0%, #5c2d91 50%, #4a2275 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 15px rgba(92,45,145,0.3);
            margin: 0 20px;
        }

        /* Cylinder left ellipse (front cap) */
        .topic-box::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 0;
            width: 30px;
            height: 100%;
            background: linear-gradient(to bottom, #a78bda 0%, #7b4bab 50%, #5c2d91 100%);
            border-radius: 50%;
            border: 2px solid #5c2d91;
            box-sizing: border-box;
        }

        /* Cylinder right ellipse (back cap) */
        .topic-box::after {
            content: '';
            position: absolute;
            right: -15px;
            top: 0;
            width: 30px;
            height: 100%;
            background: linear-gradient(to bottom, #6b3d9a 0%, #4a2275 50%, #3a1a5c 100%);
            border-radius: 50%;
            border: 2px solid #5c2d91;
            box-sizing: border-box;
            z-index: -1;
        }

        .topic-icon {
            font-size: 1.3rem;
            margin-bottom: 0.1rem;
            z-index: 1;
        }

        .topic-label {
            font-family: 'Consolas', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            z-index: 1;
        }

        .topic-subtitle {
            font-size: 0.6rem;
            opacity: 0.9;
            margin-top: 0.1rem;
            z-index: 1;
        }

        /* Subscription Lines */
        .subscription-lines {
            display: flex;
            justify-content: space-around;
            padding: 0 1rem;
            height: 40px;
            position: relative;
        }

        .subscription-lines::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15%;
            right: 15%;
            height: 3px;
            background: #5c2d91;
        }

        .sub-line {
            width: 3px;
            height: 40px;
            background: #5c2d91;
            position: relative;
        }

        .sub-line::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: -5px;
            border: 6px solid transparent;
            border-top: 8px solid #5c2d91;
        }

        /* Subscriber Flows */
        .subscriber-flows {
            display: flex;
            justify-content: space-around;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .subscriber-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255,255,255,0.5);
            border: 1px solid #e1dfdd;
            border-radius: 8px;
            padding: 0.5rem;
            min-width: 120px;
            flex: 1;
            max-width: 160px;
        }

        .flow-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--ms-blue-dark);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .subscriber-flow .component-box {
            min-width: 100px;
            padding: 0.5rem 0.6rem;
        }

        .subscriber-flow .component-box h3 {
            font-size: 0.7rem;
        }

        .subscriber-flow .component-box p {
            display: none;
        }

        .subscriber-flow .component-box .component-icon {
            width: 28px;
            height: 28px;
            font-size: 0.9rem;
        }

        .subscriber-flow .component-box .type-badge {
            font-size: 0.5rem;
            padding: 0.1rem 0.3rem;
        }

        .mini-connector {
            width: 3px;
            height: 15px;
            background: var(--ms-blue-dark);
            position: relative;
        }

        .mini-connector::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: -3px;
            border: 4px solid transparent;
            border-top: 5px solid var(--ms-blue-dark);
        }

        /* Subscriber component colors */
        .component-box.subscriber {
            border-color: #5c2d91;
        }
        .component-box.subscriber .component-icon {
            background: linear-gradient(135deg, #5c2d91, #8661c5);
        }
        .component-box.subscriber .type-badge {
            background: #5c2d91;
        }

        .component-box.downstream-prod {
            border-color: var(--downstream-color);
        }
        .component-box.downstream-prod .component-icon {
            background: linear-gradient(135deg, var(--downstream-color), #5cb85c);
        }
        .component-box.downstream-prod .type-badge {
            background: var(--downstream-color);
        }

        .component-box.reporting-conv {
            border-color: var(--reporting-color);
        }
        .component-box.reporting-conv .component-icon {
            background: linear-gradient(135deg, var(--reporting-color), #ffd700);
        }
        .component-box.reporting-conv .type-badge {
            background: #d39400;
        }

        .component-box.internal-conv {
            border-color: var(--internal-color);
        }
        .component-box.internal-conv .component-icon {
            background: linear-gradient(135deg, var(--internal-color), #8661c5);
        }
        .component-box.internal-conv .type-badge {
            background: var(--internal-color);
        }

        /* Downstream Labels */
        .downstream-labels {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
            padding: 0.75rem;
            background: #f3f2f1;
            border-radius: 6px;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .downstream-label {
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            flex: 1;
            min-width: 100px;
            padding: 0.5rem;
            border-radius: 4px;
        }

        .downstream-label small {
            display: block;
            font-weight: 400;
            opacity: 0.9;
            font-size: 0.65rem;
        }

        .murex-label { background: var(--downstream-color); }
        .gloss-label { background: var(--downstream-color); }
        .trax-label { background: var(--reporting-color); color: #323130; }
        .inv-label { background: var(--internal-color); }

        /* Data Panel */
        .data-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid #e1dfdd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .data-panel h3 {
            color: var(--ms-blue-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }
        .data-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .data-tab {
            padding: 0.5rem 1rem;
            background: #f3f2f1;
            border: 1px solid #e1dfdd;
            color: #323130;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        .data-tab:hover { background: #e1dfdd; }
        .data-tab.active { background: var(--ms-blue-dark); color: white; border-color: var(--ms-blue-dark); }
        .data-content {
            display: none;
            background: var(--ms-navy);
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.8rem;
            overflow-x: auto;
            max-height: 300px;
            overflow-y: auto;
        }
        .data-content.active { display: block; }
        .data-content pre { white-space: pre-wrap; color: #50e6ff; }

        /* Legend */
        .legend { display: flex; gap: 2rem; justify-content: center; margin-top: 1.5rem; flex-wrap: wrap; padding: 1rem; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .legend-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; color: #605e5c; }
        .legend-color { width: 24px; height: 24px; border-radius: 4px; border: 2px solid; }
        .legend-color.external { border-color: var(--external-color); background: rgba(216,59,1,0.1); }
        .legend-color.tex { border-color: var(--ms-blue-dark); background: rgba(0,120,212,0.1); }
        .legend-color.downstream { border-color: var(--downstream-color); background: rgba(16,124,16,0.1); }
        .legend-color.reporting { border-color: var(--reporting-color); background: rgba(255,185,0,0.1); }
        .legend-color.internal { border-color: var(--internal-color); background: rgba(92,45,145,0.1); }

        /* Animation Controls */
        .controls { text-align: center; margin: 1.5rem 0; }
        .btn {
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0.5rem;
            font-weight: 600;
        }
        .btn-primary { background: var(--ms-blue-dark); color: white; }
        .btn-primary:hover { background: #106ebe; box-shadow: 0 4px 12px rgba(0,120,212,0.3); }
        .btn-secondary { background: #f3f2f1; color: #323130; border: 1px solid #e1dfdd; }
        .btn-secondary:hover { background: #e1dfdd; }

        /* Status Bar */
        .status-bar { background: white; border-radius: 8px; padding: 1rem; margin-top: 1rem; border: 1px solid #e1dfdd; }
        .status-bar h4 { color: var(--ms-blue-dark); margin-bottom: 0.5rem; font-weight: 600; }
        .status-text { font-family: 'Consolas', monospace; color: var(--downstream-color); min-height: 24px; font-weight: 500; }

        /* Flow Steps */
        .flow-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .step { background: white; border-radius: 6px; padding: 1rem; border-left: 4px solid #e1dfdd; transition: all 0.3s; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .step.active { border-left-color: var(--ms-blue-dark); background: rgba(0,120,212,0.05); }
        .step.complete { border-left-color: var(--downstream-color); }
        .step-number { display: inline-block; width: 24px; height: 24px; background: #e1dfdd; border-radius: 50%; text-align: center; line-height: 24px; font-size: 0.8rem; margin-right: 0.5rem; font-weight: 600; }
        .step.active .step-number { background: var(--ms-blue-dark); color: white; }
        .step.complete .step-number { background: var(--downstream-color); color: white; }
        .step h4 { display: inline; font-size: 0.9rem; color: #323130; }
        .step p { font-size: 0.75rem; color: #605e5c; margin-top: 0.5rem; }

        /* Animation highlight */
        .component-box.highlight {
            animation: pulse-highlight 0.8s ease-in-out;
            box-shadow: 0 0 20px rgba(0,120,212,0.5);
        }

        @keyframes pulse-highlight {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .connector.animate .connector-line {
            animation: flow-animate 0.5s ease-in-out;
            background: var(--ms-blue-light);
        }

        @keyframes flow-animate {
            0% { width: 0; }
            100% { width: 40px; }
        }

        /* Demo Tabs */
        .demo-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .demo-tab {
            padding: 1rem 2rem;
            background: white;
            border: 2px solid #e1dfdd;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            color: #605e5c;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .demo-tab:hover {
            background: #f3f2f1;
            border-color: var(--ms-blue-dark);
        }

        .demo-tab.active {
            background: var(--ms-blue-dark);
            color: white;
            border-color: var(--ms-blue-dark);
        }

        .demo-tab .tab-icon {
            font-size: 1.2rem;
        }

        .demo-content {
            display: none;
        }

        .demo-content.active {
            display: block;
        }

        /* Surveillance specific styles */
        .alert-badge {
            background: #d13438;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 0.3rem;
        }

        .surveillance-color {
            --surv-red: #d13438;
            --surv-orange: #ff8c00;
            --surv-green: #107c10;
        }

        .component-box.alert {
            border-color: #d13438;
            background: rgba(209,52,56,0.05);
        }

        .component-box.alert .component-icon {
            background: linear-gradient(135deg, #d13438, #ff6b6b);
        }

        .component-box.alert .type-badge {
            background: #d13438;
        }

        .component-box.analytics {
            border-color: #ff8c00;
        }

        .component-box.analytics .component-icon {
            background: linear-gradient(135deg, #ff8c00, #ffc107);
        }

        .component-box.analytics .type-badge {
            background: #ff8c00;
        }

        .component-box.compliance {
            border-color: #107c10;
        }

        .component-box.compliance .component-icon {
            background: linear-gradient(135deg, #107c10, #5cb85c);
        }

        .component-box.compliance .type-badge {
            background: #107c10;
        }

        /* Database cylinder for surveillance */
        .db-cylinder {
            position: relative;
            width: 100px;
            height: 70px;
            background: linear-gradient(to bottom, #50e6ff 0%, #0078d4 50%, #002050 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            margin: 0 10px;
        }

        .db-cylinder::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(to bottom, #7dd3fc 0%, #0091ff 50%, #003366 100%);
            border-radius: 50%;
            border: 2px solid #0078d4;
            box-sizing: border-box;
        }

        .db-cylinder::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(to bottom, #0078d4 0%, #002050 50%, #001030 100%);
            border-radius: 50%;
            border: 2px solid #0078d4;
            box-sizing: border-box;
            z-index: -1;
        }

        /* Alert Panel */
        .alert-panel {
            background: white;
            border: 2px solid #d13438;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .alert-panel h4 {
            color: #d13438;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .alert-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #f3f2f1;
            font-size: 0.85rem;
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .alert-severity {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-right: 0.5rem;
            min-width: 60px;
            text-align: center;
        }

        .alert-severity.high { background: #d13438; color: white; }
        .alert-severity.medium { background: #ff8c00; color: white; }
        .alert-severity.low { background: #ffb900; color: #323130; }

        .alert-time {
            color: #605e5c;
            font-size: 0.75rem;
            margin-left: auto;
        }

        /* ===== RETAIL DEMO STYLES ===== */
        /* Channel Types */
        .component-box.channel-web { border-color: var(--retail-orange); }
        .component-box.channel-web .component-icon { background: linear-gradient(135deg, var(--retail-orange), #ff9f7a); }
        .component-box.channel-web .type-badge { background: var(--retail-orange); }
        .component-box.channel-mobile { border-color: var(--retail-purple); }
        .component-box.channel-mobile .component-icon { background: linear-gradient(135deg, var(--retail-purple), #c39bd3); }
        .component-box.channel-mobile .type-badge { background: var(--retail-purple); }
        .component-box.channel-store { border-color: var(--retail-teal); }
        .component-box.channel-store .component-icon { background: linear-gradient(135deg, var(--retail-teal), #48c9b0); }
        .component-box.channel-store .type-badge { background: var(--retail-teal); }
        .component-box.channel-call { border-color: #3498db; }
        .component-box.channel-call .component-icon { background: linear-gradient(135deg, #3498db, #5dade2); }
        .component-box.channel-call .type-badge { background: #3498db; }
        .component-box.channel-marketplace { border-color: #f39c12; }
        .component-box.channel-marketplace .component-icon { background: linear-gradient(135deg, #f39c12, #f7dc6f); }
        .component-box.channel-marketplace .type-badge { background: #f39c12; }

        /* Retail Processing Types */
        .component-box.fulfillment { border-color: var(--retail-green); }
        .component-box.fulfillment .component-icon { background: linear-gradient(135deg, var(--retail-green), #58d68d); }
        .component-box.fulfillment .type-badge { background: var(--retail-green); }
        .component-box.inventory { border-color: #e67e22; }
        .component-box.inventory .component-icon { background: linear-gradient(135deg, #e67e22, #f5b041); }
        .component-box.inventory .type-badge { background: #e67e22; }
        .component-box.notification { border-color: #9b59b6; }
        .component-box.notification .component-icon { background: linear-gradient(135deg, #9b59b6, #bb8fce); }
        .component-box.notification .type-badge { background: #9b59b6; }
        .component-box.analytics { border-color: #34495e; }
        .component-box.analytics .component-icon { background: linear-gradient(135deg, #34495e, #5d6d7e); }
        .component-box.analytics .type-badge { background: #34495e; }

        /* Retail Platform Container */
        .retail-tex-platform {
            background: linear-gradient(135deg, rgba(0,120,212,0.08) 0%, rgba(0,188,242,0.08) 100%);
            border: 2px solid var(--ms-blue-dark);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 0.5rem 0;
        }
        .retail-platform-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(0,120,212,0.3);
        }
        .retail-platform-logo { font-size: 1.5rem; }
        .retail-platform-title { font-size: 1.1rem; font-weight: 700; color: var(--ms-blue-dark); }
        .retail-platform-subtitle { font-size: 0.75rem; color: #605e5c; margin-left: auto; }

        /* Retail Topic */
        .retail-topic-container { display: flex; justify-content: center; margin: 1.5rem 0; padding: 15px 0; }
        .retail-topic-box {
            position: relative;
            width: 200px;
            height: 60px;
            background: linear-gradient(to bottom, #58d68d 0%, #2ecc71 50%, #27ae60 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 15px rgba(46,204,113,0.3);
            margin: 0 20px;
        }
        .retail-topic-box::before {
            content: '';
            position: absolute;
            left: -12px;
            top: 0;
            width: 24px;
            height: 100%;
            background: linear-gradient(to bottom, #7dcea0 0%, #52be80 50%, #2ecc71 100%);
            border-radius: 50%;
            border: 2px solid #27ae60;
            box-sizing: border-box;
        }
        .retail-topic-box::after {
            content: '';
            position: absolute;
            right: -12px;
            top: 0;
            width: 24px;
            height: 100%;
            background: linear-gradient(to bottom, #27ae60 0%, #1e8449 50%, #196f3d 100%);
            border-radius: 50%;
            border: 2px solid #27ae60;
            box-sizing: border-box;
            z-index: -1;
        }
        .retail-topic-icon { font-size: 1.2rem; margin-bottom: 0.1rem; z-index: 1; }
        .retail-topic-label { font-family: 'Consolas', monospace; font-size: 0.75rem; font-weight: 600; z-index: 1; }
        .retail-topic-subtitle { font-size: 0.55rem; opacity: 0.9; z-index: 1; }

        /* Retail Subscription Lines */
        .retail-sub-lines { display: flex; justify-content: space-around; padding: 0 1rem; height: 35px; position: relative; }
        .retail-sub-lines::before { content: ''; position: absolute; top: 0; left: 10%; right: 10%; height: 3px; background: #27ae60; }
        .retail-sub-line { width: 3px; height: 35px; background: #27ae60; position: relative; }
        .retail-sub-line::after { content: ''; position: absolute; bottom: -6px; left: -5px; border: 6px solid transparent; border-top: 8px solid #27ae60; }

        /* Retail Subscriber Flows */
        .retail-subscriber-flows { display: flex; justify-content: space-around; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem; }
        .retail-subscriber-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255,255,255,0.5);
            border: 1px solid #e1dfdd;
            border-radius: 8px;
            padding: 0.5rem;
            min-width: 110px;
            flex: 1;
            max-width: 140px;
        }
        .retail-flow-label { font-size: 0.65rem; font-weight: 600; color: var(--ms-blue-dark); margin-bottom: 0.5rem; text-transform: uppercase; }
        .retail-subscriber-flow .component-box { min-width: 90px; padding: 0.5rem; }
        .retail-subscriber-flow .component-box h3 { font-size: 0.65rem; }
        .retail-subscriber-flow .component-box p { display: none; }
        .retail-subscriber-flow .component-box .component-icon { width: 26px; height: 26px; font-size: 0.85rem; }
        .retail-subscriber-flow .component-box .type-badge { font-size: 0.5rem; padding: 0.1rem 0.3rem; }
        .retail-mini-connector { width: 3px; height: 12px; background: var(--ms-blue-dark); position: relative; }
        .retail-mini-connector::after { content: ''; position: absolute; bottom: -4px; left: -3px; border: 4px solid transparent; border-top: 5px solid var(--ms-blue-dark); }

        /* Retail Channels Row */
        .retail-channels-row { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem; }

        /* Retail Downstream Labels */
        .retail-downstream-labels { display: flex; justify-content: space-around; margin-top: 1rem; padding: 0.75rem; background: #f3f2f1; border-radius: 6px; gap: 0.5rem; flex-wrap: wrap; }
        .retail-downstream-label { text-align: center; font-size: 0.7rem; font-weight: 600; color: white; flex: 1; min-width: 90px; padding: 0.4rem; border-radius: 4px; }
        .retail-downstream-label small { display: block; font-weight: 400; opacity: 0.9; font-size: 0.6rem; }

        /* Retail Controls & Status */
        .retail-controls { text-align: center; margin: 1.5rem 0; }
        .retail-status-bar { background: white; border-radius: 8px; padding: 1rem; margin-top: 1rem; border: 1px solid #e1dfdd; }
        .retail-status-bar h4 { color: var(--ms-blue-dark); margin-bottom: 0.5rem; font-weight: 600; }
        .retail-status-text { font-family: 'Consolas', monospace; color: var(--downstream-color); min-height: 24px; font-weight: 500; }

        /* Retail Flow Steps */
        .retail-flow-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .retail-step { background: white; border-radius: 6px; padding: 1rem; border-left: 4px solid #e1dfdd; transition: all 0.3s; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .retail-step.active { border-left-color: var(--ms-blue-dark); background: rgba(0,120,212,0.05); }
        .retail-step.complete { border-left-color: var(--downstream-color); }
        .retail-step-number { display: inline-block; width: 22px; height: 22px; background: #e1dfdd; border-radius: 50%; text-align: center; line-height: 22px; font-size: 0.75rem; margin-right: 0.5rem; font-weight: 600; }
        .retail-step.active .retail-step-number { background: var(--ms-blue-dark); color: white; }
        .retail-step.complete .retail-step-number { background: var(--downstream-color); color: white; }
        .retail-step h4 { display: inline; font-size: 0.85rem; color: #323130; }
        .retail-step p { font-size: 0.7rem; color: #605e5c; margin-top: 0.5rem; }

        /* Retail Data Panel */
        .retail-data-panel { background: white; border-radius: 8px; padding: 1.5rem; margin-top: 2rem; border: 1px solid #e1dfdd; }
        .retail-data-panel h3 { color: var(--ms-blue-dark); margin-bottom: 1rem; font-weight: 600; }
        .retail-data-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .retail-data-tab { padding: 0.5rem 1rem; background: #f3f2f1; border: 1px solid #e1dfdd; color: #323130; border-radius: 4px; cursor: pointer; transition: all 0.3s; font-weight: 500; font-size: 0.85rem; }
        .retail-data-tab:hover { background: #e1dfdd; }
        .retail-data-tab.active { background: var(--ms-blue-dark); color: white; border-color: var(--ms-blue-dark); }
        .retail-data-content { display: none; background: var(--ms-navy); border-radius: 6px; padding: 1rem; font-family: 'Consolas', monospace; font-size: 0.75rem; max-height: 280px; overflow: auto; }
        .retail-data-content.active { display: block; }
        .retail-data-content pre { white-space: pre-wrap; color: #50e6ff; }

        /* ===== GENAI DEMO STYLES ===== */
        /* AI Input Types */
        .genai-component-box.input-text { border-color: var(--ai-blue); }
        .genai-component-box.input-text .component-icon { background: linear-gradient(135deg, var(--ai-blue), #60a5fa); }
        .genai-component-box.input-text .type-badge { background: var(--ai-blue); }
        .genai-component-box.input-image { border-color: var(--ai-pink); }
        .genai-component-box.input-image .component-icon { background: linear-gradient(135deg, var(--ai-pink), #f472b6); }
        .genai-component-box.input-image .type-badge { background: var(--ai-pink); }
        .genai-component-box.input-audio { border-color: var(--ai-orange); }
        .genai-component-box.input-audio .component-icon { background: linear-gradient(135deg, var(--ai-orange), #fb923c); }
        .genai-component-box.input-audio .type-badge { background: var(--ai-orange); }
        .genai-component-box.input-doc { border-color: var(--ai-teal); }
        .genai-component-box.input-doc .component-icon { background: linear-gradient(135deg, var(--ai-teal), #2dd4bf); }
        .genai-component-box.input-doc .type-badge { background: var(--ai-teal); }

        /* AI Processing Types */
        .genai-component-box { background: white; border: 2px solid var(--ai-purple); border-radius: 6px; padding: 0.8rem 1.2rem; min-width: 140px; text-align: center; position: relative; transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(124,58,237,0.15); }
        .genai-component-box:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(124,58,237,0.25); }
        .genai-component-box .component-icon { width: 40px; height: 40px; margin: 0 auto 0.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; background: var(--ai-gradient); color: white; }
        .genai-component-box h3 { font-size: 0.85rem; font-weight: 600; color: #323130; margin-bottom: 0.2rem; }
        .genai-component-box p { font-size: 0.7rem; color: #605e5c; }
        .genai-component-box .type-badge { position: absolute; top: -8px; left: 50%; transform: translateX(-50%); background: var(--ai-purple); color: white; font-size: 0.6rem; padding: 0.15rem 0.5rem; border-radius: 10px; font-weight: 600; text-transform: uppercase; }
        .genai-component-box.consumer { border-color: var(--ms-blue-dark); }
        .genai-component-box.consumer .component-icon { background: var(--tex-gradient); }
        .genai-component-box.consumer .type-badge { background: var(--ms-blue-dark); }
        .genai-component-box.converter { border-color: #0078d4; border-style: dashed; }
        .genai-component-box.converter .component-icon { background: linear-gradient(135deg, #0078d4, #50e6ff); }
        .genai-component-box.converter .type-badge { background: #0078d4; }
        .genai-component-box.router { border-color: var(--ms-blue-accent); border-width: 3px; }
        .genai-component-box.router .component-icon { background: linear-gradient(135deg, #00bcf2, #50e6ff); }
        .genai-component-box.router .type-badge { background: var(--ms-blue-accent); }
        .genai-component-box.output { border-color: var(--ai-green); }
        .genai-component-box.output .component-icon { background: linear-gradient(135deg, var(--ai-green), #4ade80); }
        .genai-component-box.output .type-badge { background: var(--ai-green); }

        /* AI Platform Container */
        .genai-platform-container { background: linear-gradient(135deg, rgba(124,58,237,0.08) 0%, rgba(236,72,153,0.08) 100%); border: 2px solid var(--ai-purple); border-radius: 12px; padding: 1.5rem; margin: 0.5rem 0; }
        .genai-platform-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(124,58,237,0.3); }
        .genai-platform-logo { font-size: 1.5rem; }
        .genai-platform-title { font-size: 1.1rem; font-weight: 700; color: var(--ai-purple); letter-spacing: 1px; }
        .genai-platform-subtitle { font-size: 0.75rem; color: #605e5c; margin-left: auto; }

        /* AI Hub */
        .genai-ai-hub { background: linear-gradient(135deg, #1e1b4b, #312e81); border: 3px solid var(--ai-purple); min-width: 180px; padding: 1rem 1.5rem; box-shadow: 0 4px 20px rgba(124,58,237,0.4); position: relative; overflow: hidden; }
        .genai-ai-hub::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(124,58,237,0.1), transparent); animation: genai-shimmer 3s infinite; }
        @keyframes genai-shimmer { 0% { transform: translateX(-100%) rotate(45deg); } 100% { transform: translateX(100%) rotate(45deg); } }
        .genai-ai-hub h3 { color: white; font-size: 1rem; position: relative; z-index: 1; }
        .genai-ai-hub p { color: rgba(255,255,255,0.8); position: relative; z-index: 1; }
        .genai-ai-hub .component-icon { background: white; color: var(--ai-purple); width: 50px; height: 50px; font-size: 1.5rem; position: relative; z-index: 1; }

        /* AI Model Cards */
        .genai-models-row { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin: 1rem 0; }
        .genai-model-card { background: linear-gradient(135deg, #1e1b4b, #312e81); border: 2px solid var(--ai-purple); border-radius: 10px; padding: 1rem; min-width: 130px; text-align: center; color: white; position: relative; overflow: hidden; }
        .genai-model-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--ai-gradient); }
        .genai-model-card .model-icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .genai-model-card h4 { font-size: 0.8rem; margin-bottom: 0.2rem; }
        .genai-model-card p { font-size: 0.65rem; opacity: 0.8; }
        .genai-model-card .model-badge { position: absolute; top: 8px; right: 8px; background: var(--ai-pink); color: white; font-size: 0.5rem; padding: 0.1rem 0.4rem; border-radius: 8px; font-weight: 600; }
        .genai-model-card.highlight { animation: pulse-highlight 0.8s ease-in-out; box-shadow: 0 0 25px rgba(124,58,237,0.6); }

        /* AI Topic */
        .genai-topic-container { display: flex; justify-content: center; margin: 1.5rem 0; padding: 15px 0; }
        .genai-topic-box { position: relative; width: 200px; height: 60px; background: linear-gradient(to bottom, #a78bfa 0%, #7c3aed 50%, #5b21b6 100%); border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; box-shadow: 0 4px 15px rgba(124,58,237,0.3); margin: 0 20px; }
        .genai-topic-box::before { content: ''; position: absolute; left: -12px; top: 0; width: 24px; height: 100%; background: linear-gradient(to bottom, #c4b5fd 0%, #a78bfa 50%, #7c3aed 100%); border-radius: 50%; border: 2px solid #7c3aed; box-sizing: border-box; }
        .genai-topic-box::after { content: ''; position: absolute; right: -12px; top: 0; width: 24px; height: 100%; background: linear-gradient(to bottom, #6d28d9 0%, #5b21b6 50%, #4c1d95 100%); border-radius: 50%; border: 2px solid #7c3aed; box-sizing: border-box; z-index: -1; }
        .genai-topic-icon { font-size: 1.2rem; margin-bottom: 0.1rem; z-index: 1; }
        .genai-topic-label { font-family: 'Consolas', monospace; font-size: 0.75rem; font-weight: 600; z-index: 1; }
        .genai-topic-subtitle { font-size: 0.55rem; opacity: 0.9; z-index: 1; }

        /* AI Subscription Lines */
        .genai-subscription-lines { display: flex; justify-content: space-around; padding: 0 1rem; height: 35px; position: relative; }
        .genai-subscription-lines::before { content: ''; position: absolute; top: 0; left: 10%; right: 10%; height: 3px; background: var(--ai-purple); }
        .genai-sub-line { width: 3px; height: 35px; background: var(--ai-purple); position: relative; }
        .genai-sub-line::after { content: ''; position: absolute; bottom: -6px; left: -5px; border: 6px solid transparent; border-top: 8px solid var(--ai-purple); }

        /* AI Subscriber Flows */
        .genai-subscriber-flows { display: flex; justify-content: space-around; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem; }
        .genai-subscriber-flow { display: flex; flex-direction: column; align-items: center; background: rgba(255,255,255,0.5); border: 1px solid #e1dfdd; border-radius: 8px; padding: 0.5rem; min-width: 110px; flex: 1; max-width: 140px; }
        .genai-flow-label { font-size: 0.65rem; font-weight: 600; color: var(--ai-purple); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .genai-subscriber-flow .genai-component-box { min-width: 90px; padding: 0.5rem 0.5rem; }
        .genai-subscriber-flow .genai-component-box h3 { font-size: 0.65rem; }
        .genai-subscriber-flow .genai-component-box p { display: none; }
        .genai-subscriber-flow .genai-component-box .component-icon { width: 26px; height: 26px; font-size: 0.85rem; }
        .genai-subscriber-flow .genai-component-box .type-badge { font-size: 0.5rem; padding: 0.1rem 0.3rem; }
        .genai-mini-connector { width: 3px; height: 12px; background: var(--ai-purple); position: relative; }
        .genai-mini-connector::after { content: ''; position: absolute; bottom: -4px; left: -3px; border: 4px solid transparent; border-top: 5px solid var(--ai-purple); }

        /* AI Inputs Row */
        .genai-inputs-row { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem; }

        /* AI Downstream Labels */
        .genai-downstream-labels { display: flex; justify-content: space-around; margin-top: 1rem; padding: 0.75rem; background: #f3f2f1; border-radius: 6px; gap: 0.5rem; flex-wrap: wrap; }
        .genai-downstream-label { text-align: center; font-size: 0.7rem; font-weight: 600; color: white; flex: 1; min-width: 90px; padding: 0.4rem; border-radius: 4px; }
        .genai-downstream-label small { display: block; font-weight: 400; opacity: 0.9; font-size: 0.6rem; }

        /* AI Connectors */
        .genai-connector { display: flex; align-items: center; justify-content: center; min-width: 40px; position: relative; }
        .genai-connector-line { height: 3px; width: 30px; background: var(--ai-purple); position: relative; }
        .genai-connector-line::after { content: ''; position: absolute; right: -6px; top: -4px; border: 6px solid transparent; border-left: 8px solid var(--ai-purple); }
        .genai-connector-down { display: flex; flex-direction: column; align-items: center; padding: 0.3rem 0; }
        .genai-connector-down .line { width: 3px; height: 25px; background: var(--ai-purple); }
        .genai-connector-down .arrow { width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 10px solid var(--ai-purple); }

        /* AI Controls, Status, Steps */
        .genai-controls { text-align: center; margin: 1.5rem 0; }
        .genai-btn { padding: 0.8rem 1.5rem; font-size: 1rem; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; margin: 0.5rem; font-weight: 600; }
        .genai-btn-primary { background: var(--ai-gradient); color: white; }
        .genai-btn-primary:hover { box-shadow: 0 4px 12px rgba(124,58,237,0.4); transform: translateY(-2px); }
        .genai-btn-secondary { background: #f3f2f1; color: #323130; border: 1px solid #e1dfdd; }
        .genai-btn-secondary:hover { background: #e1dfdd; }
        .genai-status-bar { background: white; border-radius: 8px; padding: 1rem; margin-top: 1rem; border: 1px solid #e1dfdd; }
        .genai-status-bar h4 { color: var(--ai-purple); margin-bottom: 0.5rem; font-weight: 600; }
        .genai-status-text { font-family: 'Consolas', monospace; color: var(--ai-purple); min-height: 24px; font-weight: 500; }
        .genai-flow-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .genai-step { background: white; border-radius: 6px; padding: 1rem; border-left: 4px solid #e1dfdd; transition: all 0.3s; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .genai-step.active { border-left-color: var(--ai-purple); background: rgba(124,58,237,0.05); }
        .genai-step.complete { border-left-color: var(--ai-green); }
        .genai-step-number { display: inline-block; width: 22px; height: 22px; background: #e1dfdd; border-radius: 50%; text-align: center; line-height: 22px; font-size: 0.75rem; margin-right: 0.5rem; font-weight: 600; }
        .genai-step.active .genai-step-number { background: var(--ai-purple); color: white; }
        .genai-step.complete .genai-step-number { background: var(--ai-green); color: white; }
        .genai-step h4 { display: inline; font-size: 0.85rem; color: #323130; }
        .genai-step p { font-size: 0.7rem; color: #605e5c; margin-top: 0.5rem; }
        .genai-component-box.highlight { animation: pulse-highlight 0.8s ease-in-out; box-shadow: 0 0 20px rgba(124,58,237,0.5); }

        /* AI Data Panel */
        .genai-data-panel { background: white; border-radius: 8px; padding: 1.5rem; margin-top: 2rem; border: 1px solid #e1dfdd; }
        .genai-data-panel h3 { color: var(--ai-purple); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }
        .genai-data-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .genai-data-tab { padding: 0.5rem 1rem; background: #f3f2f1; border: 1px solid #e1dfdd; color: #323130; border-radius: 4px; cursor: pointer; transition: all 0.3s; font-weight: 500; font-size: 0.85rem; }
        .genai-data-tab:hover { background: #e1dfdd; }
        .genai-data-tab.active { background: var(--ai-purple); color: white; border-color: var(--ai-purple); }
        .genai-data-content { display: none; background: linear-gradient(135deg, #1e1b4b, #312e81); border-radius: 6px; padding: 1rem; font-family: 'Consolas', monospace; font-size: 0.75rem; overflow-x: auto; max-height: 280px; overflow-y: auto; }
        .genai-data-content.active { display: block; }
        .genai-data-content pre { white-space: pre-wrap; color: #c4b5fd; }

        /* ==================== VIBE CODING DEMO STYLES ==================== */
        .vibe-builder-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem; }
        @media (max-width: 1000px) { .vibe-builder-layout { grid-template-columns: 1fr; } }

        /* Chat Panel */
        .vibe-chat-panel { background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 2px solid var(--vibe-orange); overflow: hidden; display: flex; flex-direction: column; min-height: 500px; }
        .vibe-chat-header { background: var(--vibe-gradient); color: white; padding: 1rem 1.5rem; display: flex; align-items: center; gap: 0.75rem; }
        .vibe-chat-header-icon { font-size: 1.5rem; }
        .vibe-chat-header h3 { font-size: 1.1rem; font-weight: 600; }
        .vibe-chat-header span { font-size: 0.8rem; opacity: 0.9; margin-left: auto; }
        .vibe-chat-messages { flex: 1; padding: 1rem; overflow-y: auto; background: #fafafa; display: flex; flex-direction: column; gap: 1rem; }
        .vibe-message { max-width: 85%; padding: 0.75rem 1rem; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; animation: vibeFadeIn 0.3s ease; }
        @keyframes vibeFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .vibe-message.user { background: var(--vibe-gradient); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .vibe-message.assistant { background: white; border: 1px solid #e5e7eb; align-self: flex-start; border-bottom-left-radius: 4px; }
        .vibe-message.assistant .icon { color: var(--vibe-orange); margin-right: 0.5rem; }
        .vibe-chat-input-area { padding: 1rem; background: white; border-top: 1px solid #e5e7eb; display: flex; gap: 0.75rem; }
        .vibe-chat-input { flex: 1; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 0.9rem; transition: border-color 0.2s; }
        .vibe-chat-input:focus { outline: none; border-color: var(--vibe-orange); }
        .vibe-chat-input::placeholder { color: #9ca3af; }
        .vibe-send-btn { background: var(--vibe-gradient); color: white; border: none; padding: 0.75rem 1.25rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .vibe-send-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(249,115,22,0.4); }

        /* Code Panel */
        .vibe-code-panel { background: var(--code-bg); border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); overflow: hidden; display: flex; flex-direction: column; min-height: 500px; }
        .vibe-code-header { background: #0f172a; padding: 0.75rem 1rem; display: flex; align-items: center; gap: 0.5rem; border-bottom: 1px solid #334155; }
        .vibe-code-dot { width: 12px; height: 12px; border-radius: 50%; }
        .vibe-code-dot.red { background: #ef4444; }
        .vibe-code-dot.yellow { background: #fbbf24; }
        .vibe-code-dot.green { background: #22c55e; }
        .vibe-code-tabs { display: flex; gap: 0.25rem; margin-left: 1rem; }
        .vibe-code-tab { padding: 0.4rem 1rem; background: transparent; color: #94a3b8; border: none; border-radius: 6px 6px 0 0; cursor: pointer; font-size: 0.8rem; transition: all 0.2s; }
        .vibe-code-tab:hover { color: white; }
        .vibe-code-tab.active { background: var(--code-bg); color: var(--vibe-yellow); }
        .vibe-code-content { flex: 1; padding: 1rem; overflow: auto; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.8rem; line-height: 1.6; }
        .vibe-code-content pre { color: var(--code-text); white-space: pre-wrap; }
        .vibe-code-content .keyword { color: #c084fc; }
        .vibe-code-content .string { color: #86efac; }
        .vibe-code-content .comment { color: #64748b; font-style: italic; }
        .vibe-code-content .function { color: #60a5fa; }
        .vibe-code-content .number { color: #fbbf24; }
        .vibe-code-content .annotation { color: #f472b6; }
        .vibe-code-content .type { color: #22d3ee; }
        .vibe-code-status { background: #0f172a; padding: 0.5rem 1rem; border-top: 1px solid #334155; display: flex; align-items: center; gap: 1rem; font-size: 0.75rem; color: #94a3b8; }
        .vibe-status-indicator { display: flex; align-items: center; gap: 0.4rem; }
        .vibe-status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--vibe-green); animation: vibePulse 2s infinite; }
        @keyframes vibePulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* Flow Preview */
        .vibe-flow-preview { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem; }
        .vibe-flow-preview h3 { color: var(--vibe-orange); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
        .vibe-flow-diagram { display: flex; align-items: center; justify-content: center; gap: 0.5rem; flex-wrap: wrap; padding: 1rem; background: #fef3c7; border-radius: 8px; min-height: 80px; }
        .vibe-flow-node { background: white; border: 2px solid var(--vibe-orange); border-radius: 8px; padding: 0.6rem 1rem; font-size: 0.8rem; font-weight: 600; color: #1e293b; display: flex; align-items: center; gap: 0.4rem; transition: all 0.3s; }
        .vibe-flow-node.source { border-color: var(--vibe-blue); background: #eff6ff; }
        .vibe-flow-node.process { border-color: var(--vibe-purple); background: #f5f3ff; }
        .vibe-flow-node.target { border-color: var(--vibe-green); background: #f0fdf4; }
        .vibe-flow-node.highlight { transform: scale(1.05); box-shadow: 0 4px 12px rgba(249,115,22,0.3); }
        .vibe-flow-arrow { color: var(--vibe-orange); font-size: 1.2rem; font-weight: bold; }

        /* Typing Indicator */
        .vibe-typing-indicator { display: flex; gap: 4px; padding: 0.75rem 1rem; background: white; border: 1px solid #e5e7eb; border-radius: 12px; border-bottom-left-radius: 4px; align-self: flex-start; max-width: 80px; }
        .vibe-typing-indicator span { width: 8px; height: 8px; background: var(--vibe-orange); border-radius: 50%; animation: vibeTyping 1.4s infinite; }
        .vibe-typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .vibe-typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes vibeTyping { 0%, 60%, 100% { transform: translateY(0); opacity: 0.4; } 30% { transform: translateY(-6px); opacity: 1; } }

        /* Vibe Controls */
        .vibe-controls { text-align: center; margin: 1.5rem 0; }
        .vibe-btn { padding: 0.8rem 1.5rem; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s; margin: 0.5rem; font-weight: 600; }
        .vibe-btn-primary { background: var(--vibe-gradient); color: white; }
        .vibe-btn-primary:hover { box-shadow: 0 4px 12px rgba(249,115,22,0.4); transform: translateY(-2px); }
        .vibe-btn-secondary { background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; }
        .vibe-btn-secondary:hover { background: #e5e7eb; }

        /* Example Prompts */
        .vibe-example-prompts { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .vibe-example-prompts h3 { color: var(--vibe-orange); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
        .vibe-prompt-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; }
        .vibe-prompt-card { background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 1px solid #fcd34d; border-radius: 8px; padding: 1rem; cursor: pointer; transition: all 0.2s; }
        .vibe-prompt-card:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(249,115,22,0.2); border-color: var(--vibe-orange); }
        .vibe-prompt-card h4 { font-size: 0.9rem; color: #92400e; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.4rem; }
        .vibe-prompt-card p { font-size: 0.8rem; color: #78350f; line-height: 1.4; }

        /* Vibe Legend */
        .vibe-legend { display: flex; gap: 1.5rem; justify-content: center; margin-top: 1.5rem; flex-wrap: wrap; padding: 1rem; background: white; border-radius: 8px; }
        .vibe-legend-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem; color: #605e5c; }
        .vibe-legend-color { width: 20px; height: 20px; border-radius: 4px; border: 2px solid; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TeX</h1>
            <p>TECHNICAL EXCHANGE | Platform Capabilities Demo</p>
        </header>

        <!-- Demo Tabs -->
        <div class="demo-tabs">
            <div class="demo-tab active" onclick="switchDemo('genai')">
                <span class="tab-icon"></span>
                Gen AI
                <span class="alert-badge">AI</span>
            </div>
            <div class="demo-tab" onclick="switchDemo('vibe')">
                <span class="tab-icon"></span>
                Vibe Coding
            </div>
            <div class="demo-tab" onclick="switchDemo('surveillance')">
                <span class="tab-icon"></span>
                Surveillance
                <span class="alert-badge">AI</span>
            </div>
            <div class="demo-tab" onclick="switchDemo('trade-flow')">
                <span class="tab-icon"></span>
                Trade Flow
            </div>
            <div class="demo-tab" onclick="switchDemo('retail')">
                <span class="tab-icon"></span>
                Retail
            </div>
        </div>

        <!-- Trade Flow Demo Content -->
        <div class="demo-content" id="demo-trade-flow">
            <div class="demo-title">
                <h2> Real-Time Trade Processing Pipeline</h2>
                <p>Bloomberg TOMS  TeX Integration Hub  Multi-System Distribution</p>
            </div>

            <!-- Flow Visualization - Ikasan Style -->
            <div class="flow-container" id="flowContainer">
            <!-- Row 1: External Source -->
            <div class="flow-row">
                <div class="component" id="comp-bloomberg">
                    <div class="component-box external">
                        <span class="type-badge">External</span>
                        <div class="component-icon"></div>
                        <h3>Bloomberg TOMS</h3>
                        <p>Trade Order Management</p>
                    </div>
                </div>
            </div>

            <div class="flow-row">
                <div class="connector-down" id="arrow1">
                    <div class="line"></div>
                    <div class="arrow"></div>
                </div>
            </div>

            <!-- TeX Platform Container -->
            <div class="tex-platform-container">
                <div class="platform-header">
                    <span class="platform-logo"></span>
                    <span class="platform-title">TeX Platform</span>
                    <span class="platform-subtitle">Technical Exchange Integration Flow</span>
                </div>

                <!-- Inbound Flow: Consumer  Converter  Topic -->
                <div class="tex-flow inbound-flow">
                    <div class="component" id="comp-fix">
                        <div class="component-box consumer">
                            <span class="type-badge">Consumer</span>
                            <div class="component-icon"></div>
                            <h3>FIX Consumer</h3>
                            <p>Bloomberg FIX 4.4</p>
                        </div>
                    </div>

                    <div class="connector" id="arrow2">
                        <div class="connector-line"></div>
                    </div>

                    <div class="component" id="comp-transformer">
                        <div class="component-box converter">
                            <span class="type-badge">Converter</span>
                            <div class="component-icon"></div>
                            <h3>FIXFpML Transformer</h3>
                            <p>Validation  Enrichment</p>
                        </div>
                    </div>

                    <div class="connector" id="arrow3">
                        <div class="connector-line"></div>
                    </div>

                    <div class="component" id="comp-producer-topic">
                        <div class="component-box producer">
                            <span class="type-badge">Producer</span>
                            <div class="component-icon"></div>
                            <h3>Topic Publisher</h3>
                            <p>Publish FpML</p>
                        </div>
                    </div>
                </div>

                <!-- Topic (Pub/Sub) -->
                <div class="topic-container">
                    <div class="topic-box" id="comp-topic">
                        <div class="topic-icon"></div>
                        <div class="topic-label">trade.fpml.topic</div>
                        <div class="topic-subtitle">Publish-Subscribe</div>
                    </div>
                </div>

                <!-- Subscription Lines -->
                <div class="subscription-lines">
                    <div class="sub-line" id="sub-line-1"></div>
                    <div class="sub-line" id="sub-line-2"></div>
                    <div class="sub-line" id="sub-line-3"></div>
                    <div class="sub-line" id="sub-line-4"></div>
                </div>

                <!-- Subscriber Flows (4 parallel pipelines) -->
                <div class="subscriber-flows">
                    <!-- Murex Flow -->
                    <div class="subscriber-flow" id="flow-murex">
                        <div class="flow-label">Murex Flow</div>
                        <div class="component" id="comp-murex-consumer">
                            <div class="component-box consumer subscriber">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Topic Subscriber</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-murex-converter">
                            <div class="component-box converter">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>FpMLMxML</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-murex-producer">
                            <div class="component-box producer downstream-prod">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Murex Producer</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Gloss Flow -->
                    <div class="subscriber-flow" id="flow-gloss">
                        <div class="flow-label">Gloss Flow</div>
                        <div class="component" id="comp-gloss-consumer">
                            <div class="component-box consumer subscriber">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Topic Subscriber</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-gloss-converter">
                            <div class="component-box converter">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>FpMLGlossXML</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-gloss-producer">
                            <div class="component-box producer downstream-prod">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Gloss Producer</h3>
                            </div>
                        </div>
                    </div>

                    <!-- TRAX Flow -->
                    <div class="subscriber-flow" id="flow-trax">
                        <div class="flow-label">TRAX Flow</div>
                        <div class="component" id="comp-trax-consumer">
                            <div class="component-box consumer subscriber">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Topic Subscriber</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-trax-converter">
                            <div class="component-box converter reporting-conv">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>FpMLARM/APA</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-trax-producer">
                            <div class="component-box reporting downstream-prod">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>TRAX Producer</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Inventory Flow -->
                    <div class="subscriber-flow" id="flow-inventory">
                        <div class="flow-label">Inventory Flow</div>
                        <div class="component" id="comp-inv-consumer">
                            <div class="component-box consumer subscriber">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Topic Subscriber</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-inv-converter">
                            <div class="component-box converter internal-conv">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>FpMLJSON</h3>
                            </div>
                        </div>
                        <div class="mini-connector"></div>
                        <div class="component" id="comp-inv-producer">
                            <div class="component-box internal downstream-prod">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Inventory Producer</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Downstream Systems Labels -->
            <div class="downstream-labels">
                <div class="downstream-label murex-label">Murex MX.3<br><small>Risk Management</small></div>
                <div class="downstream-label gloss-label">Gloss<br><small>Trade Confirm</small></div>
                <div class="downstream-label trax-label">TRAX<br><small>MiFID II Regulatory</small></div>
                <div class="downstream-label inv-label">Trade Inventory<br><small>Position Keeping</small></div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item"><div class="legend-color external"></div> External Systems</div>
            <div class="legend-item"><div class="legend-color tex"></div> TeX Platform</div>
            <div class="legend-item"><div class="legend-color downstream"></div> Downstream Systems</div>
            <div class="legend-item"><div class="legend-color reporting"></div> Regulatory Reporting</div>
            <div class="legend-item"><div class="legend-color internal"></div> Internal Systems</div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-primary" onclick="startDemo()"> Run Trade Flow Demo</button>
            <button class="btn btn-secondary" onclick="resetDemo()"> Reset</button>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <h4> Live Status</h4>
            <div class="status-text" id="statusText">Ready to process trade...</div>
        </div>

        <!-- Flow Steps -->
        <div class="flow-steps" id="flowSteps">
            <div class="step" id="step1">
                <span class="step-number">1</span>
                <h4>Trade Booked</h4>
                <p>IRS trade booked in Bloomberg TOMS (external network)</p>
            </div>
            <div class="step" id="step2">
                <span class="step-number">2</span>
                <h4>FIX Consumer</h4>
                <p>TeX FIX Consumer receives trade via FIX 4.4 protocol</p>
            </div>
            <div class="step" id="step3">
                <span class="step-number">3</span>
                <h4>Transform to FpML</h4>
                <p>TeX Converter: FIX  FpML transformation & validation</p>
            </div>
            <div class="step" id="step4">
                <span class="step-number">4</span>
                <h4>Route & Distribute</h4>
                <p>Multi-Recipient Router sends to Murex (MxML)</p>
            </div>
            <div class="step" id="step5">
                <span class="step-number">5</span>
                <h4>Parallel: Gloss + TRAX</h4>
                <p>Confirmation + ARM/APA regulatory reporting</p>
            </div>
            <div class="step" id="step6">
                <span class="step-number">6</span>
                <h4>Parallel: Inventory</h4>
                <p>Add trade to in-house position inventory</p>
            </div>
        </div>

        <!-- Data Panel -->
        <div class="data-panel">
            <h3> Message Payloads</h3>
            <div class="data-tabs">
                <button class="data-tab active" onclick="showData('fix')">FIX Message</button>
                <button class="data-tab" onclick="showData('fpml')">FpML Output</button>
                <button class="data-tab" onclick="showData('murex')">Murex Format</button>
                <button class="data-tab" onclick="showData('trax')">TRAX Report</button>
                <button class="data-tab" onclick="showData('inventory')">Inventory Record</button>
            </div>

            <div class="data-content active" id="data-fix">
                <pre>
8=FIX.4.4|9=512|35=8|49=BLOOMBERG|56=TEXGATEWAY|
34=1234|52=20240215-14:30:00.000|
11=TRD-2024-001234|17=EXEC-789456|
150=F|39=2|55=IRS|
48=US912828ZT09|22=1|
54=1|38=10000000|44=99.875|
32=10000000|31=99.875|
6=99.875|14=10000000|
151=0|60=20240215-14:30:00.000|
75=20240215|
167=IRS|
541=20290215|
225=20240217|
10=089|

Trade Details:

Trade ID:      TRD-2024-001234
Instrument:    Interest Rate Swap (IRS)
Direction:     BUY (Pay Fixed)
Notional:      USD 10,000,000
Fixed Rate:    3.75%
Float Index:   USD-SOFR-OIS
Maturity:      5 Years
Trade Date:    2024-02-15
Settle Date:   2024-02-17
Counterparty:  BANK OF AMERICA N.A.
                </pre>
            </div>

            <div class="data-content" id="data-fpml">
                <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;FpML xmlns="http://www.fpml.org/FpML-5/confirmation"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      version="5-12"&gt;
  &lt;trade&gt;
    &lt;tradeHeader&gt;
      &lt;partyTradeIdentifier&gt;
        &lt;partyReference href="party1"/&gt;
        &lt;tradeId tradeIdScheme="http://tex.com/trade-id"&gt;
          TRD-2024-001234
        &lt;/tradeId&gt;
      &lt;/partyTradeIdentifier&gt;
      &lt;tradeDate&gt;2024-02-15&lt;/tradeDate&gt;
    &lt;/tradeHeader&gt;

    &lt;swap&gt;
      &lt;productType&gt;InterestRateSwap&lt;/productType&gt;

      &lt;!-- Fixed Leg (Pay) --&gt;
      &lt;swapStream id="fixedLeg"&gt;
        &lt;payerPartyReference href="party1"/&gt;
        &lt;receiverPartyReference href="party2"/&gt;
        &lt;calculationPeriodDates&gt;
          &lt;effectiveDate&gt;2024-02-17&lt;/effectiveDate&gt;
          &lt;terminationDate&gt;2029-02-15&lt;/terminationDate&gt;
          &lt;calculationPeriodFrequency&gt;
            &lt;periodMultiplier&gt;6&lt;/periodMultiplier&gt;
            &lt;period&gt;M&lt;/period&gt;
          &lt;/calculationPeriodFrequency&gt;
        &lt;/calculationPeriodDates&gt;
        &lt;calculationPeriodAmount&gt;
          &lt;notionalSchedule&gt;
            &lt;notionalStepSchedule&gt;
              &lt;initialValue&gt;10000000&lt;/initialValue&gt;
              &lt;currency&gt;USD&lt;/currency&gt;
            &lt;/notionalStepSchedule&gt;
          &lt;/notionalSchedule&gt;
          &lt;fixedRateSchedule&gt;
            &lt;initialValue&gt;0.0375&lt;/initialValue&gt;
          &lt;/fixedRateSchedule&gt;
        &lt;/calculationPeriodAmount&gt;
      &lt;/swapStream&gt;

      &lt;!-- Floating Leg (Receive) --&gt;
      &lt;swapStream id="floatLeg"&gt;
        &lt;payerPartyReference href="party2"/&gt;
        &lt;receiverPartyReference href="party1"/&gt;
        &lt;calculationPeriodAmount&gt;
          &lt;floatingRateCalculation&gt;
            &lt;floatingRateIndex&gt;USD-SOFR-OIS&lt;/floatingRateIndex&gt;
          &lt;/floatingRateCalculation&gt;
        &lt;/calculationPeriodAmount&gt;
      &lt;/swapStream&gt;
    &lt;/swap&gt;
  &lt;/trade&gt;

  &lt;party id="party1"&gt;
    &lt;partyId&gt;TEXCLIENT&lt;/partyId&gt;
    &lt;partyName&gt;TeX Client Institution&lt;/partyName&gt;
  &lt;/party&gt;
  &lt;party id="party2"&gt;
    &lt;partyId&gt;BOFA&lt;/partyId&gt;
    &lt;partyName&gt;Bank of America N.A.&lt;/partyName&gt;
  &lt;/party&gt;
&lt;/FpML&gt;
                </pre>
            </div>

            <div class="data-content" id="data-murex">
                <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;MxML xmlns="http://www.murex.com/mxml/3-1-40"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      version="3.1.40"&gt;
  &lt;mxmlHeader&gt;
    &lt;messageId&gt;TEX-MSG-2024-001234&lt;/messageId&gt;
    &lt;messageType&gt;TRADE_INSERT&lt;/messageType&gt;
    &lt;sourceSystem&gt;TEX_INTEGRATION&lt;/sourceSystem&gt;
    &lt;targetSystem&gt;MUREX_MX3&lt;/targetSystem&gt;
    &lt;timestamp&gt;2024-02-15T14:30:05.234Z&lt;/timestamp&gt;
  &lt;/mxmlHeader&gt;

  &lt;mxmlTrade&gt;
    &lt;tradeHeader&gt;
      &lt;tradeId&gt;MX-TRD-2024-001234&lt;/tradeId&gt;
      &lt;externalReference&gt;TRD-2024-001234&lt;/externalReference&gt;
      &lt;tradeDate&gt;2024-02-15&lt;/tradeDate&gt;
      &lt;tradeTime&gt;14:30:00&lt;/tradeTime&gt;
      &lt;tradeStatus&gt;VALIDATED&lt;/tradeStatus&gt;
      &lt;inputUser&gt;TEX_STP&lt;/inputUser&gt;
      &lt;portfolio&gt;IRD_TRADING&lt;/portfolio&gt;
      &lt;book&gt;IRS_USD_BOOK&lt;/book&gt;
    &lt;/tradeHeader&gt;

    &lt;instrument&gt;
      &lt;family&gt;IRD&lt;/family&gt;
      &lt;group&gt;IRS&lt;/group&gt;
      &lt;type&gt;IRS_VANILLA&lt;/type&gt;
      &lt;subType&gt;FIXED_FLOAT&lt;/subType&gt;
    &lt;/instrument&gt;

    &lt;swap&gt;
      &lt;generalInfo&gt;
        &lt;effectiveDate&gt;2024-02-17&lt;/effectiveDate&gt;
        &lt;terminationDate&gt;2029-02-15&lt;/terminationDate&gt;
        &lt;notionalCurrency&gt;USD&lt;/notionalCurrency&gt;
        &lt;notionalAmount&gt;10000000&lt;/notionalAmount&gt;
      &lt;/generalInfo&gt;

      &lt;!-- Pay Leg (Fixed) --&gt;
      &lt;leg legId="1"&gt;
        &lt;legType&gt;FIXED&lt;/legType&gt;
        &lt;payReceive&gt;PAY&lt;/payReceive&gt;
        &lt;notional&gt;
          &lt;amount&gt;10000000&lt;/amount&gt;
          &lt;currency&gt;USD&lt;/currency&gt;
        &lt;/notional&gt;
        &lt;fixedRate&gt;
          &lt;rate&gt;0.0375&lt;/rate&gt;
          &lt;dayCountConvention&gt;30/360&lt;/dayCountConvention&gt;
        &lt;/fixedRate&gt;
        &lt;paymentFrequency&gt;
          &lt;period&gt;6&lt;/period&gt;
          &lt;periodUnit&gt;M&lt;/periodUnit&gt;
        &lt;/paymentFrequency&gt;
        &lt;businessDayConvention&gt;MODFOLLOWING&lt;/businessDayConvention&gt;
        &lt;paymentCalendar&gt;NYC&lt;/paymentCalendar&gt;
      &lt;/leg&gt;

      &lt;!-- Receive Leg (Floating) --&gt;
      &lt;leg legId="2"&gt;
        &lt;legType&gt;FLOATING&lt;/legType&gt;
        &lt;payReceive&gt;RECEIVE&lt;/payReceive&gt;
        &lt;notional&gt;
          &lt;amount&gt;10000000&lt;/amount&gt;
          &lt;currency&gt;USD&lt;/currency&gt;
        &lt;/notional&gt;
        &lt;floatingRate&gt;
          &lt;index&gt;USD-SOFR-OIS&lt;/index&gt;
          &lt;spread&gt;0&lt;/spread&gt;
          &lt;dayCountConvention&gt;ACT/360&lt;/dayCountConvention&gt;
          &lt;compoundingMethod&gt;COMPOUNDING&lt;/compoundingMethod&gt;
        &lt;/floatingRate&gt;
        &lt;resetFrequency&gt;
          &lt;period&gt;1&lt;/period&gt;
          &lt;periodUnit&gt;D&lt;/periodUnit&gt;
        &lt;/resetFrequency&gt;
        &lt;paymentFrequency&gt;
          &lt;period&gt;6&lt;/period&gt;
          &lt;periodUnit&gt;M&lt;/periodUnit&gt;
        &lt;/paymentFrequency&gt;
      &lt;/leg&gt;
    &lt;/swap&gt;

    &lt;counterparty&gt;
      &lt;partyId&gt;CPTY-BOFA-001&lt;/partyId&gt;
      &lt;partyName&gt;Bank of America N.A.&lt;/partyName&gt;
      &lt;legalEntityIdentifier&gt;9DJT3UXIJIZJI4JHUJ78&lt;/legalEntityIdentifier&gt;
      &lt;partyRole&gt;COUNTERPARTY&lt;/partyRole&gt;
    &lt;/counterparty&gt;

    &lt;settlement&gt;
      &lt;settlementMethod&gt;STANDARD&lt;/settlementMethod&gt;
      &lt;settlementCurrency&gt;USD&lt;/settlementCurrency&gt;
    &lt;/settlement&gt;
  &lt;/mxmlTrade&gt;

  &lt;mxmlProcessingInfo&gt;
    &lt;validationStatus&gt;PASSED&lt;/validationStatus&gt;
    &lt;enrichmentStatus&gt;COMPLETE&lt;/enrichmentStatus&gt;
    &lt;bookingStatus&gt;SUCCESS&lt;/bookingStatus&gt;
    &lt;mxTradeNumber&gt;78456123&lt;/mxTradeNumber&gt;
  &lt;/mxmlProcessingInfo&gt;
&lt;/MxML&gt;

&lt;!--  MxML Import Status: SUCCESS --&gt;
&lt;!--  Murex Trade Number: 78456123 --&gt;
&lt;!--  Risk Calculation: Triggered --&gt;
                </pre>
            </div>

            <div class="data-content" id="data-trax">
                <pre>

           TRAX ARM/APA REGULATORY REPORT                        
           MiFID II Transaction Reporting                        

 Report Type:        ARM (Approved Reporting Mechanism)          
 Regulation:         MiFID II / MiFIR Article 26                 
 Submission Time:    2024-02-15T14:30:08.567Z                    
 Report Status:      ACCEPTED                                    


TRANSACTION DETAILS:

Transaction Ref:        TRX-2024-001234-ARM
Trading Venue:          XOFF (Off-Exchange)
Execution Time:         2024-02-15T14:30:00.000Z
Trading Capacity:       DEAL (Dealing on own account)

INSTRUMENT IDENTIFICATION:

ISIN:                   EZ9876543210
CFI Code:               SRCCXC
Instrument Type:        Interest Rate Swap
Underlying Index:       USD-SOFR-OIS

PRICE & QUANTITY:

Notional Amount:        10,000,000.00
Notional Currency:      USD
Price:                  3.750% (Fixed Rate)
Price Currency:         USD

COUNTERPARTY INFORMATION:

Reporting Entity LEI:   5493001KJTIIGC8Y1R12
Counterparty LEI:       9DJT3UXIJIZJI4JHUJ78
Counterparty Name:      Bank of America N.A.
Counterparty Country:   US

BUYER/SELLER:

Buyer (Fixed Payer):    Reporting Entity
Seller (Float Payer):   Counterparty

APA PUBLICATION (Post-Trade Transparency):

Publication Time:       2024-02-15T14:30:10.000Z
Deferral Applied:       NO
Price Published:        3.750%
Volume Published:       10,000,000 USD


  ARM Report: ACCEPTED by National Competent Authority         
  APA Report: PUBLISHED to market                              
 Reference: TRAX-ARM-2024-001234-CONFIRMED                       

                </pre>
            </div>

            <div class="data-content" id="data-inventory">
                <pre>

              IN-HOUSE TRADE INVENTORY SYSTEM                      
              Position & Trade Repository                          


 TRADE RECORD CREATED


{
  "inventoryId": "INV-2024-001234",
  "externalRefs": {
    "bloombergId": "TRD-2024-001234",
    "murexId": "MX-TRD-2024-001234",
    "traxRef": "TRAX-ARM-2024-001234"
  },
  "tradeDetails": {
    "productType": "IRS",
    "subType": "VANILLA_FIXED_FLOAT",
    "direction": "PAY_FIXED",
    "notional": 10000000,
    "currency": "USD",
    "fixedRate": 0.0375,
    "floatIndex": "USD-SOFR-OIS",
    "effectiveDate": "2024-02-17",
    "maturityDate": "2029-02-15",
    "dayCountFixed": "30/360",
    "dayCountFloat": "ACT/360"
  },
  "counterparty": {
    "name": "Bank of America N.A.",
    "lei": "9DJT3UXIJIZJI4JHUJ78",
    "internalId": "CPTY-BOFA-001"
  },
  "lifecycle": {
    "status": "ACTIVE",
    "createdAt": "2024-02-15T14:30:12.345Z",
    "createdBy": "TEX_INTEGRATION",
    "version": 1
  },
  "riskMetrics": {
    "dv01": 4250.00,
    "presentValue": 0.00,
    "currency": "USD",
    "calculatedAt": "2024-02-15T14:30:15.000Z"
  },
  "auditTrail": [
    {
      "timestamp": "2024-02-15T14:30:00.000Z",
      "event": "TRADE_RECEIVED",
      "source": "BLOOMBERG_FIX"
    },
    {
      "timestamp": "2024-02-15T14:30:02.000Z",
      "event": "TRANSFORMED_TO_FPML",
      "source": "TEX_TRANSFORMER"
    },
    {
      "timestamp": "2024-02-15T14:30:05.000Z",
      "event": "DISTRIBUTED_TO_MUREX",
      "status": "SUCCESS"
    },
    {
      "timestamp": "2024-02-15T14:30:06.000Z",
      "event": "DISTRIBUTED_TO_GLOSS",
      "status": "SUCCESS"
    },
    {
      "timestamp": "2024-02-15T14:30:08.000Z",
      "event": "REPORTED_TO_TRAX",
      "status": "ACCEPTED"
    },
    {
      "timestamp": "2024-02-15T14:30:12.000Z",
      "event": "INVENTORY_CREATED",
      "status": "SUCCESS"
    }
  ]
}


 Trade successfully added to inventory
 Position updated: USD IRS +10,000,000 notional
 Risk aggregation triggered
 Compliance checks: PASSED

                </pre>
            </div>
        </div>
        </div>
        <!-- End Trade Flow Demo Content -->

        <!-- Trade Surveillance Demo Content -->
        <div class="demo-content" id="demo-surveillance">
            <div class="demo-title">
                <h2> AI-Powered Trade Surveillance</h2>
                <p>Real-time Market Abuse Detection  Pattern Analysis  Regulatory Compliance</p>
            </div>

            <!-- Surveillance Flow Visualization -->
            <div class="flow-container" id="survFlowContainer">
                <!-- Row 1: Data Sources -->
                <div class="flow-row" style="justify-content: space-around; margin-bottom: 1rem;">
                    <div class="component" id="surv-trades">
                        <div class="component-box external">
                            <span class="type-badge">Source</span>
                            <div class="component-icon"></div>
                            <h3>Trade Feed</h3>
                            <p>Real-time Executions</p>
                        </div>
                    </div>
                    <div class="component" id="surv-orders">
                        <div class="component-box external">
                            <span class="type-badge">Source</span>
                            <div class="component-icon"></div>
                            <h3>Order Feed</h3>
                            <p>Order Book Events</p>
                        </div>
                    </div>
                    <div class="component" id="surv-market">
                        <div class="component-box external">
                            <span class="type-badge">Source</span>
                            <div class="component-icon"></div>
                            <h3>Market Data</h3>
                            <p>Prices  Volumes</p>
                        </div>
                    </div>
                    <div class="component" id="surv-comms">
                        <div class="component-box external">
                            <span class="type-badge">Source</span>
                            <div class="component-icon"></div>
                            <h3>Communications</h3>
                            <p>Voice  Chat  Email</p>
                        </div>
                    </div>
                </div>

                <!-- Connector arrows down -->
                <div class="flow-row" style="justify-content: space-around;">
                    <div class="connector-down" id="surv-arrow1"><div class="line"></div><div class="arrow"></div></div>
                    <div class="connector-down" id="surv-arrow2"><div class="line"></div><div class="arrow"></div></div>
                    <div class="connector-down" id="surv-arrow3"><div class="line"></div><div class="arrow"></div></div>
                    <div class="connector-down" id="surv-arrow4"><div class="line"></div><div class="arrow"></div></div>
                </div>

                <!-- TeX Surveillance Platform -->
                <div class="tex-platform-container">
                    <div class="platform-header">
                        <span class="platform-logo"></span>
                        <span class="platform-title">TeX Surveillance Platform</span>
                        <span class="platform-subtitle">AI-Powered Market Abuse Detection</span>
                    </div>

                    <!-- Ingestion Layer -->
                    <div class="tex-flow inbound-flow">
                        <div class="component" id="surv-consumer">
                            <div class="component-box consumer">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Multi-Source Consumer</h3>
                                <p>Unified Data Ingestion</p>
                            </div>
                        </div>

                        <div class="connector" id="surv-arrow5">
                            <div class="connector-line"></div>
                        </div>

                        <div class="component" id="surv-normalizer">
                            <div class="component-box converter">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>Data Normalizer</h3>
                                <p>Standardize  Enrich</p>
                            </div>
                        </div>

                        <div class="connector" id="surv-arrow6">
                            <div class="connector-line"></div>
                        </div>

                        <div class="component" id="surv-correlator">
                            <div class="component-box analytics">
                                <span class="type-badge">Processor</span>
                                <div class="component-icon"></div>
                                <h3>Event Correlator</h3>
                                <p>Link Related Events</p>
                            </div>
                        </div>
                    </div>

                    <!-- Topic for surveillance events -->
                    <div class="topic-container">
                        <div class="topic-box" id="surv-topic">
                            <div class="topic-icon"></div>
                            <div class="topic-label">surveillance.events.topic</div>
                            <div class="topic-subtitle">Correlated Events Stream</div>
                        </div>
                    </div>

                    <!-- Subscription Lines -->
                    <div class="subscription-lines">
                        <div class="sub-line"></div>
                        <div class="sub-line"></div>
                        <div class="sub-line"></div>
                        <div class="sub-line"></div>
                    </div>

                    <!-- AI Detection Engines -->
                    <div class="subscriber-flows">
                        <!-- Spoofing Detection -->
                        <div class="subscriber-flow" id="flow-spoofing">
                            <div class="flow-label">Spoofing Detection</div>
                            <div class="component" id="surv-spoof-consumer">
                                <div class="component-box consumer subscriber">
                                    <span class="type-badge">Consumer</span>
                                    <div class="component-icon"></div>
                                    <h3>Subscriber</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-spoof-ai">
                                <div class="component-box alert">
                                    <span class="type-badge">AI Engine</span>
                                    <div class="component-icon"></div>
                                    <h3>Spoofing AI</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-spoof-alert">
                                <div class="component-box alert downstream-prod">
                                    <span class="type-badge">Alert</span>
                                    <div class="component-icon"></div>
                                    <h3>Alert Generator</h3>
                                </div>
                            </div>
                        </div>

                        <!-- Layering Detection -->
                        <div class="subscriber-flow" id="flow-layering">
                            <div class="flow-label">Layering Detection</div>
                            <div class="component" id="surv-layer-consumer">
                                <div class="component-box consumer subscriber">
                                    <span class="type-badge">Consumer</span>
                                    <div class="component-icon"></div>
                                    <h3>Subscriber</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-layer-ai">
                                <div class="component-box alert">
                                    <span class="type-badge">AI Engine</span>
                                    <div class="component-icon"></div>
                                    <h3>Layering AI</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-layer-alert">
                                <div class="component-box alert downstream-prod">
                                    <span class="type-badge">Alert</span>
                                    <div class="component-icon"></div>
                                    <h3>Alert Generator</h3>
                                </div>
                            </div>
                        </div>

                        <!-- Insider Trading Detection -->
                        <div class="subscriber-flow" id="flow-insider">
                            <div class="flow-label">Insider Trading</div>
                            <div class="component" id="surv-insider-consumer">
                                <div class="component-box consumer subscriber">
                                    <span class="type-badge">Consumer</span>
                                    <div class="component-icon"></div>
                                    <h3>Subscriber</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-insider-ai">
                                <div class="component-box alert">
                                    <span class="type-badge">AI Engine</span>
                                    <div class="component-icon"></div>
                                    <h3>Insider AI</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-insider-alert">
                                <div class="component-box alert downstream-prod">
                                    <span class="type-badge">Alert</span>
                                    <div class="component-icon"></div>
                                    <h3>Alert Generator</h3>
                                </div>
                            </div>
                        </div>

                        <!-- Wash Trading Detection -->
                        <div class="subscriber-flow" id="flow-wash">
                            <div class="flow-label">Wash Trading</div>
                            <div class="component" id="surv-wash-consumer">
                                <div class="component-box consumer subscriber">
                                    <span class="type-badge">Consumer</span>
                                    <div class="component-icon"></div>
                                    <h3>Subscriber</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-wash-ai">
                                <div class="component-box alert">
                                    <span class="type-badge">AI Engine</span>
                                    <div class="component-icon"></div>
                                    <h3>Wash Trade AI</h3>
                                </div>
                            </div>
                            <div class="mini-connector"></div>
                            <div class="component" id="surv-wash-alert">
                                <div class="component-box alert downstream-prod">
                                    <span class="type-badge">Alert</span>
                                    <div class="component-icon"></div>
                                    <h3>Alert Generator</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Output Systems -->
                <div class="flow-row" style="margin-top: 1rem;">
                    <div class="connector-down"><div class="line"></div><div class="arrow"></div></div>
                </div>

                <div class="downstream-labels" style="margin-top: 0.5rem;">
                    <div class="downstream-label" style="background: #d13438;">Alert Dashboard<br><small>Real-time Monitoring</small></div>
                    <div class="downstream-label" style="background: #ff8c00;">Case Management<br><small>Investigation Workflow</small></div>
                    <div class="downstream-label" style="background: #107c10;">Regulatory Reports<br><small>STR/SAR Filing</small></div>
                    <div class="downstream-label" style="background: #5c2d91;">Audit Trail<br><small>Complete History</small></div>
                </div>
            </div>

            <!-- Surveillance Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color external"></div> Data Sources</div>
                <div class="legend-item"><div class="legend-color tex"></div> TeX Platform</div>
                <div class="legend-item"><div class="legend-color" style="border-color: #d13438; background: rgba(209,52,56,0.1);"></div> AI Detection</div>
                <div class="legend-item"><div class="legend-color" style="border-color: #ff8c00; background: rgba(255,140,0,0.1);"></div> Analytics</div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn btn-primary" onclick="startSurvDemo()"> Run Surveillance Demo</button>
                <button class="btn btn-secondary" onclick="resetSurvDemo()"> Reset</button>
            </div>

            <!-- Status Bar -->
            <div class="status-bar">
                <h4> Surveillance Status</h4>
                <div class="status-text" id="survStatusText">Ready to analyze trading activity...</div>
            </div>

            <!-- Alert Panel -->
            <div class="alert-panel">
                <h4> Live Alerts</h4>
                <div id="alertList">
                    <div class="alert-item" style="color: #605e5c; font-style: italic;">
                        No alerts detected. Run demo to see AI-powered detection in action.
                    </div>
                </div>
            </div>

            <!-- Flow Steps -->
            <div class="flow-steps">
                <div class="step" id="surv-step1">
                    <span class="step-number">1</span>
                    <h4>Data Ingestion</h4>
                    <p>Consume trades, orders, market data, and communications</p>
                </div>
                <div class="step" id="surv-step2">
                    <span class="step-number">2</span>
                    <h4>Normalize & Enrich</h4>
                    <p>Standardize formats, add reference data</p>
                </div>
                <div class="step" id="surv-step3">
                    <span class="step-number">3</span>
                    <h4>Event Correlation</h4>
                    <p>Link related events across data sources</p>
                </div>
                <div class="step" id="surv-step4">
                    <span class="step-number">4</span>
                    <h4>AI Detection</h4>
                    <p>Run ML models for market abuse patterns</p>
                </div>
                <div class="step" id="surv-step5">
                    <span class="step-number">5</span>
                    <h4>Alert Generation</h4>
                    <p>Create prioritized alerts with evidence</p>
                </div>
                <div class="step" id="surv-step6">
                    <span class="step-number">6</span>
                    <h4>Case & Report</h4>
                    <p>Workflow management & regulatory filing</p>
                </div>
            </div>

            <!-- Data Panel -->
            <div class="data-panel">
                <h3> Surveillance Data</h3>
                <div class="data-tabs">
                    <button class="data-tab active" onclick="showSurvData('event')">Correlated Event</button>
                    <button class="data-tab" onclick="showSurvData('alert')">Alert Payload</button>
                    <button class="data-tab" onclick="showSurvData('case')">Case Record</button>
                    <button class="data-tab" onclick="showSurvData('str')">STR Report</button>
                </div>

                <div class="data-content active" id="surv-data-event">
                    <pre>
{
  "eventId": "EVT-2024-789456",
  "timestamp": "2024-02-15T14:30:00.000Z",
  "eventType": "CORRELATED_TRADING_ACTIVITY",
  "trader": {
    "id": "TRD-001",
    "name": "John Smith",
    "desk": "Equity Trading",
    "location": "London"
  },
  "instrument": {
    "symbol": "AAPL",
    "isin": "US0378331005",
    "exchange": "NASDAQ"
  },
  "correlatedEvents": [
    {
      "type": "ORDER_PLACED",
      "side": "BUY",
      "quantity": 50000,
      "price": 185.50,
      "timestamp": "2024-02-15T14:28:15.000Z"
    },
    {
      "type": "ORDER_CANCELLED",
      "orderId": "ORD-123456",
      "timestamp": "2024-02-15T14:28:45.000Z"
    },
    {
      "type": "ORDER_PLACED",
      "side": "SELL",
      "quantity": 10000,
      "price": 185.75,
      "timestamp": "2024-02-15T14:29:00.000Z"
    },
    {
      "type": "TRADE_EXECUTED",
      "side": "SELL",
      "quantity": 10000,
      "price": 185.80,
      "timestamp": "2024-02-15T14:29:30.000Z"
    }
  ],
  "marketContext": {
    "priceAtStart": 185.25,
    "priceAtEnd": 185.80,
    "volumeSpike": true,
    "bidAskSpread": 0.05
  }
}
                    </pre>
                </div>

                <div class="data-content" id="surv-data-alert">
                    <pre>
{
  "alertId": "ALT-2024-001234",
  "timestamp": "2024-02-15T14:30:05.000Z",
  "alertType": "POTENTIAL_SPOOFING",
  "severity": "HIGH",
  "confidence": 0.87,
  "status": "NEW",
  "trader": {
    "id": "TRD-001",
    "name": "John Smith",
    "desk": "Equity Trading"
  },
  "instrument": {
    "symbol": "AAPL",
    "name": "Apple Inc."
  },
  "detection": {
    "model": "SPOOFING_DETECTOR_V3",
    "modelVersion": "3.2.1",
    "features": {
      "orderCancelRatio": 0.83,
      "priceImpact": 0.55,
      "timeToCancel": "30s",
      "oppositeTradeWithin": "45s"
    },
    "explanation": "Large buy order placed and cancelled within 30 seconds, followed by sell execution at higher price. Pattern consistent with spoofing behavior."
  },
  "evidence": [
    "Order ORD-123456: BUY 50,000 @ $185.50 - CANCELLED",
    "Order ORD-123457: SELL 10,000 @ $185.75 - EXECUTED @ $185.80",
    "Price moved $0.55 (0.3%) during activity window"
  ],
  "regulatoryFlags": ["MAR", "MiFID II"],
  "assignedTo": null,
  "escalationLevel": 1
}
                    </pre>
                </div>

                <div class="data-content" id="surv-data-case">
                    <pre>
{
  "caseId": "CASE-2024-000456",
  "createdAt": "2024-02-15T14:35:00.000Z",
  "status": "UNDER_INVESTIGATION",
  "priority": "HIGH",
  "assignedTo": {
    "id": "COMP-002",
    "name": "Sarah Johnson",
    "role": "Senior Compliance Officer"
  },
  "subject": {
    "traderId": "TRD-001",
    "traderName": "John Smith",
    "department": "Equity Trading"
  },
  "relatedAlerts": [
    "ALT-2024-001234",
    "ALT-2024-001198",
    "ALT-2024-001156"
  ],
  "timeline": [
    {
      "timestamp": "2024-02-15T14:35:00.000Z",
      "action": "CASE_CREATED",
      "user": "SYSTEM",
      "notes": "Auto-generated from high-severity alert"
    },
    {
      "timestamp": "2024-02-15T14:40:00.000Z",
      "action": "ASSIGNED",
      "user": "SYSTEM",
      "notes": "Assigned to Sarah Johnson based on workload"
    },
    {
      "timestamp": "2024-02-15T15:00:00.000Z",
      "action": "INVESTIGATION_STARTED",
      "user": "Sarah Johnson",
      "notes": "Reviewing trading patterns for past 30 days"
    }
  ],
  "findings": [],
  "recommendation": null,
  "regulatoryDeadline": "2024-02-22T23:59:59.000Z"
}
                    </pre>
                </div>

                <div class="data-content" id="surv-data-str">
                    <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;SuspiciousTransactionReport xmlns="urn:fca:str:1.0"&gt;
  &lt;Header&gt;
    &lt;ReportId&gt;STR-2024-000123&lt;/ReportId&gt;
    &lt;ReportingEntity&gt;
      &lt;Name&gt;Example Investment Bank&lt;/Name&gt;
      &lt;LEI&gt;549300EXAMPLE00LEI00&lt;/LEI&gt;
      &lt;Jurisdiction&gt;GB&lt;/Jurisdiction&gt;
    &lt;/ReportingEntity&gt;
    &lt;SubmissionDate&gt;2024-02-20&lt;/SubmissionDate&gt;
    &lt;ReportType&gt;STOR&lt;/ReportType&gt;
  &lt;/Header&gt;

  &lt;SuspiciousActivity&gt;
    &lt;ActivityType&gt;MARKET_MANIPULATION&lt;/ActivityType&gt;
    &lt;SubType&gt;SPOOFING&lt;/SubType&gt;
    &lt;DateRange&gt;
      &lt;StartDate&gt;2024-02-15&lt;/StartDate&gt;
      &lt;EndDate&gt;2024-02-15&lt;/EndDate&gt;
    &lt;/DateRange&gt;
    &lt;Description&gt;
      Pattern of large orders placed and rapidly cancelled,
      followed by execution on opposite side at improved prices.
      Behavior consistent with spoofing under MAR Article 12.
    &lt;/Description&gt;
  &lt;/SuspiciousActivity&gt;

  &lt;SubjectPerson&gt;
    &lt;InternalId&gt;TRD-001&lt;/InternalId&gt;
    &lt;Name&gt;John Smith&lt;/Name&gt;
    &lt;Role&gt;Trader&lt;/Role&gt;
    &lt;Department&gt;Equity Trading&lt;/Department&gt;
  &lt;/SubjectPerson&gt;

  &lt;FinancialInstruments&gt;
    &lt;Instrument&gt;
      &lt;ISIN&gt;US0378331005&lt;/ISIN&gt;
      &lt;Name&gt;Apple Inc.&lt;/Name&gt;
      &lt;Exchange&gt;NASDAQ&lt;/Exchange&gt;
    &lt;/Instrument&gt;
  &lt;/FinancialInstruments&gt;

  &lt;TransactionDetails&gt;
    &lt;TotalValue currency="USD"&gt;1857500.00&lt;/TotalValue&gt;
    &lt;NumberOfTransactions&gt;4&lt;/NumberOfTransactions&gt;
    &lt;PriceImpact&gt;0.30%&lt;/PriceImpact&gt;
  &lt;/TransactionDetails&gt;

  &lt;InternalInvestigation&gt;
    &lt;CaseId&gt;CASE-2024-000456&lt;/CaseId&gt;
    &lt;Investigator&gt;Sarah Johnson&lt;/Investigator&gt;
    &lt;Conclusion&gt;SUSPICIOUS_ACTIVITY_CONFIRMED&lt;/Conclusion&gt;
  &lt;/InternalInvestigation&gt;
&lt;/SuspiciousTransactionReport&gt;
                    </pre>
                </div>
            </div>
        </div>
        <!-- End Trade Surveillance Demo Content -->

        <!-- Retail Omnichannel Demo Content -->
        <div class="demo-content" id="demo-retail">
            <div class="demo-title">
                <h2> Retail Omnichannel Order Management</h2>
                <p>Multi-Channel Orders  TeX Integration Hub  Unified Fulfillment</p>
            </div>

            <!-- Flow Visualization -->
            <div class="flow-container" id="retailFlowContainer">
                <!-- Row 1: Sales Channels -->
                <div class="retail-channels-row">
                    <div class="component" id="retail-comp-web">
                        <div class="component-box channel-web">
                            <span class="type-badge">Web</span>
                            <div class="component-icon"></div>
                            <h3>E-Commerce</h3>
                            <p>Online Store</p>
                        </div>
                    </div>
                    <div class="component" id="retail-comp-mobile">
                        <div class="component-box channel-mobile">
                            <span class="type-badge">Mobile</span>
                            <div class="component-icon"></div>
                            <h3>Mobile App</h3>
                            <p>iOS / Android</p>
                        </div>
                    </div>
                    <div class="component" id="retail-comp-store">
                        <div class="component-box channel-store">
                            <span class="type-badge">In-Store</span>
                            <div class="component-icon"></div>
                            <h3>POS System</h3>
                            <p>Retail Stores</p>
                        </div>
                    </div>
                    <div class="component" id="retail-comp-call">
                        <div class="component-box channel-call">
                            <span class="type-badge">Call Center</span>
                            <div class="component-icon"></div>
                            <h3>Phone Orders</h3>
                            <p>Customer Service</p>
                        </div>
                    </div>
                    <div class="component" id="retail-comp-marketplace">
                        <div class="component-box channel-marketplace">
                            <span class="type-badge">Marketplace</span>
                            <div class="component-icon"></div>
                            <h3>Amazon/eBay</h3>
                            <p>3rd Party</p>
                        </div>
                    </div>
                </div>

                <div class="flow-row">
                    <div class="connector-down">
                        <div class="line"></div>
                        <div class="arrow"></div>
                    </div>
                </div>

                <!-- TeX Platform Container -->
                <div class="retail-tex-platform">
                    <div class="retail-platform-header">
                        <span class="retail-platform-logo"></span>
                        <span class="retail-platform-title">TeX Platform</span>
                        <span class="retail-platform-subtitle">Omnichannel Order Orchestration</span>
                    </div>

                    <!-- Inbound Flow -->
                    <div class="flow-row" style="margin-bottom: 1rem;">
                        <div class="component" id="retail-comp-consumer">
                            <div class="component-box consumer">
                                <span class="type-badge">Consumer</span>
                                <div class="component-icon"></div>
                                <h3>Order Ingestion</h3>
                                <p>Multi-Channel API</p>
                            </div>
                        </div>
                        <div class="connector"><div class="connector-line"></div></div>
                        <div class="component" id="retail-comp-normalizer">
                            <div class="component-box converter">
                                <span class="type-badge">Converter</span>
                                <div class="component-icon"></div>
                                <h3>Order Normalizer</h3>
                                <p>Unified Format</p>
                            </div>
                        </div>
                        <div class="connector"><div class="connector-line"></div></div>
                        <div class="component" id="retail-comp-validator">
                            <div class="component-box converter">
                                <span class="type-badge">Validator</span>
                                <div class="component-icon"></div>
                                <h3>Order Validator</h3>
                                <p>Rules Engine</p>
                            </div>
                        </div>
                        <div class="connector"><div class="connector-line"></div></div>
                        <div class="component" id="retail-comp-enricher">
                            <div class="component-box converter">
                                <span class="type-badge">Enricher</span>
                                <div class="component-icon"></div>
                                <h3>Data Enrichment</h3>
                                <p>Customer/Product</p>
                            </div>
                        </div>
                    </div>

                    <!-- Topic -->
                    <div class="retail-topic-container">
                        <div class="retail-topic-box" id="retail-order-topic">
                            <span class="retail-topic-icon"></span>
                            <span class="retail-topic-label">orders.validated</span>
                            <span class="retail-topic-subtitle">Pub/Sub Topic</span>
                        </div>
                    </div>

                    <!-- Subscription Lines -->
                    <div class="retail-sub-lines">
                        <div class="retail-sub-line"></div>
                        <div class="retail-sub-line"></div>
                        <div class="retail-sub-line"></div>
                        <div class="retail-sub-line"></div>
                        <div class="retail-sub-line"></div>
                        <div class="retail-sub-line"></div>
                    </div>

                    <!-- Subscriber Flows -->
                    <div class="retail-subscriber-flows">
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">Inventory</span>
                            <div class="component-box inventory">
                                <span class="type-badge">Reserve</span>
                                <div class="component-icon"></div>
                                <h3>Stock Reserve</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>WMS</h3>
                            </div>
                        </div>
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">Fulfillment</span>
                            <div class="component-box fulfillment">
                                <span class="type-badge">Router</span>
                                <div class="component-icon"></div>
                                <h3>Ship Router</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Carriers</h3>
                            </div>
                        </div>
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">Payment</span>
                            <div class="component-box converter">
                                <span class="type-badge">Process</span>
                                <div class="component-icon"></div>
                                <h3>Payment</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Gateway</h3>
                            </div>
                        </div>
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">Notification</span>
                            <div class="component-box notification">
                                <span class="type-badge">Format</span>
                                <div class="component-icon"></div>
                                <h3>Notify</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Email/SMS</h3>
                            </div>
                        </div>
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">ERP</span>
                            <div class="component-box converter">
                                <span class="type-badge">Transform</span>
                                <div class="component-icon"></div>
                                <h3>ERP Format</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>SAP/Oracle</h3>
                            </div>
                        </div>
                        <div class="retail-subscriber-flow">
                            <span class="retail-flow-label">Analytics</span>
                            <div class="component-box analytics">
                                <span class="type-badge">Stream</span>
                                <div class="component-icon"></div>
                                <h3>Events</h3>
                            </div>
                            <div class="retail-mini-connector"></div>
                            <div class="component-box producer">
                                <span class="type-badge">Producer</span>
                                <div class="component-icon"></div>
                                <h3>Data Lake</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Downstream Labels -->
                    <div class="retail-downstream-labels">
                        <div class="retail-downstream-label" style="background: #e67e22;">WMS<small>Warehouse Mgmt</small></div>
                        <div class="retail-downstream-label" style="background: var(--retail-green);">Carriers<small>FedEx/UPS/DHL</small></div>
                        <div class="retail-downstream-label" style="background: var(--ms-blue-dark);">Payment<small>Stripe/PayPal</small></div>
                        <div class="retail-downstream-label" style="background: #9b59b6;">Comms<small>SendGrid/Twilio</small></div>
                        <div class="retail-downstream-label" style="background: #34495e;">ERP<small>SAP/Oracle</small></div>
                        <div class="retail-downstream-label" style="background: #2c3e50;">Analytics<small>Snowflake/BigQuery</small></div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="retail-controls">
                <button class="btn btn-primary" onclick="startRetailAnimation()"> Start Order Flow</button>
                <button class="btn btn-secondary" onclick="resetRetailAnimation()"> Reset</button>
            </div>

            <!-- Status Bar -->
            <div class="retail-status-bar">
                <h4> Order Processing Status</h4>
                <div class="retail-status-text" id="retailStatusText">Ready to process order...</div>
            </div>

            <!-- Flow Steps -->
            <div class="retail-flow-steps">
                <div class="retail-step" id="retail-step1">
                    <span class="retail-step-number">1</span>
                    <h4>Order Received</h4>
                    <p>Customer places order via any channel</p>
                </div>
                <div class="retail-step" id="retail-step2">
                    <span class="retail-step-number">2</span>
                    <h4>Normalize & Validate</h4>
                    <p>Convert to unified format, apply business rules</p>
                </div>
                <div class="retail-step" id="retail-step3">
                    <span class="retail-step-number">3</span>
                    <h4>Enrich Data</h4>
                    <p>Add customer profile, product details, pricing</p>
                </div>
                <div class="retail-step" id="retail-step4">
                    <span class="retail-step-number">4</span>
                    <h4>Publish to Topic</h4>
                    <p>Validated order published for subscribers</p>
                </div>
                <div class="retail-step" id="retail-step5">
                    <span class="retail-step-number">5</span>
                    <h4>Parallel Processing</h4>
                    <p>Inventory, fulfillment, payment, notifications</p>
                </div>
                <div class="retail-step" id="retail-step6">
                    <span class="retail-step-number">6</span>
                    <h4>Complete</h4>
                    <p>Order distributed to all downstream systems</p>
                </div>
            </div>

            <!-- Data Panel -->
            <div class="retail-data-panel">
                <h3> Sample Order Data</h3>
                <div class="retail-data-tabs">
                    <div class="retail-data-tab active" onclick="showRetailData('incoming')">Incoming Order</div>
                    <div class="retail-data-tab" onclick="showRetailData('normalized')">Normalized</div>
                    <div class="retail-data-tab" onclick="showRetailData('enriched')">Enriched</div>
                    <div class="retail-data-tab" onclick="showRetailData('fulfillment')">Fulfillment</div>
                </div>
                <div class="retail-data-content active" id="retail-data-incoming">
<pre>{
  "source": "mobile_app",
  "channel": "iOS",
  "order_id": "MOB-2024-789456",
  "timestamp": "2024-02-12T14:32:18Z",
  "customer": {
    "id": "CUST-12345",
    "email": "john.doe@email.com"
  },
  "items": [
    { "sku": "PROD-001", "qty": 2, "price": 49.99 },
    { "sku": "PROD-042", "qty": 1, "price": 129.99 }
  ]
}</pre>
                </div>
                <div class="retail-data-content" id="retail-data-normalized">
<pre>{
  "order": {
    "id": "ORD-2024-789456",
    "source_channel": "MOBILE",
    "created_at": "2024-02-12T14:32:18Z",
    "status": "VALIDATED"
  },
  "line_items": [
    { "product_id": "PROD-001", "quantity": 2, "unit_price": 49.99 },
    { "product_id": "PROD-042", "quantity": 1, "unit_price": 129.99 }
  ],
  "totals": { "subtotal": 229.97, "tax": 46.00, "grand_total": 288.96 }
}</pre>
                </div>
                <div class="retail-data-content" id="retail-data-enriched">
<pre>{
  "order": { "id": "ORD-2024-789456", "priority": "HIGH" },
  "customer": {
    "name": "John Doe",
    "loyalty_tier": "GOLD",
    "lifetime_value": 4250.00
  },
  "line_items": [
    { "product_id": "PROD-001", "name": "Premium Headphones", "warehouse": "UK-LONDON-01" },
    { "product_id": "PROD-042", "name": "Smart Watch Pro", "warehouse": "UK-LONDON-01" }
  ]
}</pre>
                </div>
                <div class="retail-data-content" id="retail-data-fulfillment">
<pre>{
  "fulfillment_request": {
    "order_id": "ORD-2024-789456",
    "warehouse_id": "UK-LONDON-01",
    "pick_list": [
      { "sku": "PROD-001", "location": "A-12-3", "qty": 2 },
      { "sku": "PROD-042", "location": "B-05-1", "qty": 1 }
    ]
  },
  "shipping_label": {
    "carrier": "DHL_EXPRESS",
    "tracking_number": "DHL-1234567890"
  }
}</pre>
                </div>
            </div>
        </div>
        <!-- End Retail Demo Content -->

        <!-- Generative AI Demo Content -->
        <div class="demo-content active" id="demo-genai">
            <div class="demo-title">
                <h2> Enterprise Generative AI Workflow Orchestration</h2>
                <p>Multi-Modal Input  TeX AI Hub  Intelligent Processing  Multi-Channel Output</p>
            </div>

            <!-- Flow Visualization -->
            <div class="flow-container" id="genaiFlowContainer">
                <!-- Row 1: Input Sources -->
                <div class="genai-inputs-row">
                    <div class="component" id="genai-comp-text">
                        <div class="genai-component-box input-text">
                            <span class="type-badge">Text</span>
                            <div class="component-icon"></div>
                            <h3>Text Input</h3>
                            <p>Prompts & Queries</p>
                        </div>
                    </div>
                    <div class="component" id="genai-comp-image">
                        <div class="genai-component-box input-image">
                            <span class="type-badge">Image</span>
                            <div class="component-icon"></div>
                            <h3>Image Input</h3>
                            <p>Photos & Graphics</p>
                        </div>
                    </div>
                    <div class="component" id="genai-comp-audio">
                        <div class="genai-component-box input-audio">
                            <span class="type-badge">Audio</span>
                            <div class="component-icon"></div>
                            <h3>Voice Input</h3>
                            <p>Speech & Audio</p>
                        </div>
                    </div>
                    <div class="component" id="genai-comp-doc">
                        <div class="genai-component-box input-doc">
                            <span class="type-badge">Document</span>
                            <div class="component-icon"></div>
                            <h3>Documents</h3>
                            <p>PDF, Word, Excel</p>
                        </div>
                    </div>
                </div>

                <div class="flow-row">
                    <div class="genai-connector-down" id="genai-arrow1">
                        <div class="line"></div>
                        <div class="arrow"></div>
                    </div>
                </div>

                <!-- TeX Platform Container -->
                <div class="genai-platform-container">
                    <div class="genai-platform-header">
                        <span class="genai-platform-logo"></span>
                        <span class="genai-platform-title">TeX AI Orchestration Hub</span>
                        <span class="genai-platform-subtitle">Intelligent Workflow Management</span>
                    </div>

                    <!-- Inbound Flow -->
                    <div class="flow-row" style="margin-bottom: 1rem;">
                        <div class="component" id="genai-comp-ingest">
                            <div class="genai-component-box consumer">
                                <span class="type-badge">Ingest</span>
                                <div class="component-icon"></div>
                                <h3>Multi-Modal</h3>
                                <p>Input Handler</p>
                            </div>
                        </div>
                        <div class="genai-connector"><div class="genai-connector-line"></div></div>
                        <div class="component" id="genai-comp-preprocess">
                            <div class="genai-component-box converter">
                                <span class="type-badge">Process</span>
                                <div class="component-icon"></div>
                                <h3>Pre-Process</h3>
                                <p>Normalize & Clean</p>
                            </div>
                        </div>
                        <div class="genai-connector"><div class="genai-connector-line"></div></div>
                        <div class="component" id="genai-comp-router">
                            <div class="genai-component-box router">
                                <span class="type-badge">Router</span>
                                <div class="component-icon"></div>
                                <h3>AI Router</h3>
                                <p>Model Selection</p>
                            </div>
                        </div>
                    </div>

                    <!-- AI Models Row -->
                    <div class="genai-models-row">
                        <div class="genai-model-card" id="genai-model-gpt">
                            <span class="model-badge">LLM</span>
                            <div class="model-icon"></div>
                            <h4>GPT-4 / Claude</h4>
                            <p>Text Generation</p>
                        </div>
                        <div class="genai-model-card" id="genai-model-dalle">
                            <span class="model-badge">Vision</span>
                            <div class="model-icon"></div>
                            <h4>DALL-E / Midjourney</h4>
                            <p>Image Generation</p>
                        </div>
                        <div class="genai-model-card" id="genai-model-whisper">
                            <span class="model-badge">Speech</span>
                            <div class="model-icon"></div>
                            <h4>Whisper / TTS</h4>
                            <p>Speech Processing</p>
                        </div>
                        <div class="genai-model-card" id="genai-model-embed">
                            <span class="model-badge">RAG</span>
                            <div class="model-icon"></div>
                            <h4>Embeddings</h4>
                            <p>Vector Search</p>
                        </div>
                    </div>

                    <!-- Topic -->
                    <div class="genai-topic-container">
                        <div class="genai-topic-box" id="genai-ai-topic">
                            <span class="genai-topic-icon"></span>
                            <span class="genai-topic-label">ai.responses</span>
                            <span class="genai-topic-subtitle">Generated Content</span>
                        </div>
                    </div>

                    <!-- Subscription Lines -->
                    <div class="genai-subscription-lines">
                        <div class="genai-sub-line"></div>
                        <div class="genai-sub-line"></div>
                        <div class="genai-sub-line"></div>
                        <div class="genai-sub-line"></div>
                        <div class="genai-sub-line"></div>
                    </div>

                    <!-- Subscriber Flows -->
                    <div class="genai-subscriber-flows">
                        <div class="genai-subscriber-flow">
                            <span class="genai-flow-label">Content</span>
                            <div class="genai-component-box converter">
                                <span class="type-badge">Format</span>
                                <div class="component-icon"></div>
                                <h3>CMS</h3>
                            </div>
                            <div class="genai-mini-connector"></div>
                            <div class="genai-component-box output">
                                <span class="type-badge">Publish</span>
                                <div class="component-icon"></div>
                                <h3>Website</h3>
                            </div>
                        </div>
                        <div class="genai-subscriber-flow">
                            <span class="genai-flow-label">Email</span>
                            <div class="genai-component-box converter">
                                <span class="type-badge">Template</span>
                                <div class="component-icon"></div>
                                <h3>Personalize</h3>
                            </div>
                            <div class="genai-mini-connector"></div>
                            <div class="genai-component-box output">
                                <span class="type-badge">Send</span>
                                <div class="component-icon"></div>
                                <h3>Campaigns</h3>
                            </div>
                        </div>
                        <div class="genai-subscriber-flow">
                            <span class="genai-flow-label">Chat</span>
                            <div class="genai-component-box converter">
                                <span class="type-badge">Stream</span>
                                <div class="component-icon"></div>
                                <h3>Response</h3>
                            </div>
                            <div class="genai-mini-connector"></div>
                            <div class="genai-component-box output">
                                <span class="type-badge">Reply</span>
                                <div class="component-icon"></div>
                                <h3>Chatbot</h3>
                            </div>
                        </div>
                        <div class="genai-subscriber-flow">
                            <span class="genai-flow-label">Analytics</span>
                            <div class="genai-component-box converter">
                                <span class="type-badge">Log</span>
                                <div class="component-icon"></div>
                                <h3>Metrics</h3>
                            </div>
                            <div class="genai-mini-connector"></div>
                            <div class="genai-component-box output">
                                <span class="type-badge">Store</span>
                                <div class="component-icon"></div>
                                <h3>Dashboard</h3>
                            </div>
                        </div>
                        <div class="genai-subscriber-flow">
                            <span class="genai-flow-label">Archive</span>
                            <div class="genai-component-box converter">
                                <span class="type-badge">Index</span>
                                <div class="component-icon"></div>
                                <h3>Vectorize</h3>
                            </div>
                            <div class="genai-mini-connector"></div>
                            <div class="genai-component-box output">
                                <span class="type-badge">Store</span>
                                <div class="component-icon"></div>
                                <h3>Vector DB</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Downstream Labels -->
                    <div class="genai-downstream-labels">
                        <div class="genai-downstream-label" style="background: var(--ai-blue);">CMS<small>WordPress/Contentful</small></div>
                        <div class="genai-downstream-label" style="background: var(--ai-pink);">Email<small>Mailchimp/HubSpot</small></div>
                        <div class="genai-downstream-label" style="background: var(--ai-purple);">Chat<small>Slack/Teams/Web</small></div>
                        <div class="genai-downstream-label" style="background: var(--ai-teal);">Analytics<small>Datadog/Grafana</small></div>
                        <div class="genai-downstream-label" style="background: #6366f1;">Vector DB<small>Pinecone/Weaviate</small></div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="genai-controls">
                <button class="genai-btn genai-btn-primary" onclick="startGenAIAnimation()"> Start AI Workflow</button>
                <button class="genai-btn genai-btn-secondary" onclick="resetGenAIAnimation()"> Reset</button>
            </div>

            <!-- Status Bar -->
            <div class="genai-status-bar">
                <h4> AI Processing Status</h4>
                <div class="genai-status-text" id="genaiStatusText">Ready to process AI request...</div>
            </div>

            <!-- Flow Steps -->
            <div class="genai-flow-steps">
                <div class="genai-step" id="genai-step1">
                    <span class="genai-step-number">1</span>
                    <h4>Input Received</h4>
                    <p>Multi-modal input captured</p>
                </div>
                <div class="genai-step" id="genai-step2">
                    <span class="genai-step-number">2</span>
                    <h4>Pre-Process</h4>
                    <p>Normalize & validate input</p>
                </div>
                <div class="genai-step" id="genai-step3">
                    <span class="genai-step-number">3</span>
                    <h4>Route to Model</h4>
                    <p>Select optimal AI model</p>
                </div>
                <div class="genai-step" id="genai-step4">
                    <span class="genai-step-number">4</span>
                    <h4>Generate Response</h4>
                    <p>AI model processes request</p>
                </div>
                <div class="genai-step" id="genai-step5">
                    <span class="genai-step-number">5</span>
                    <h4>Publish to Topic</h4>
                    <p>Response published for distribution</p>
                </div>
                <div class="genai-step" id="genai-step6">
                    <span class="genai-step-number">6</span>
                    <h4>Distribute</h4>
                    <p>Content sent to all channels</p>
                </div>
            </div>

            <!-- Data Panel -->
            <div class="genai-data-panel">
                <h3> Sample AI Request/Response Data</h3>
                <div class="genai-data-tabs">
                    <div class="genai-data-tab active" onclick="showGenAIData('prompt')">Input Prompt</div>
                    <div class="genai-data-tab" onclick="showGenAIData('request')">AI Request</div>
                    <div class="genai-data-tab" onclick="showGenAIData('response')">Model Response</div>
                    <div class="genai-data-tab" onclick="showGenAIData('output')">Formatted Output</div>
                </div>
                <div class="genai-data-content active" id="genai-data-prompt">
<pre>{
  "input_type": "text",
  "source": "web_chat",
  "session_id": "SESS-2024-789456",
  "timestamp": "2024-02-12T14:32:18Z",
  "user": {
    "id": "USER-12345",
    "tier": "enterprise"
  },
  "prompt": {
    "text": "Generate a professional email to notify customers about our new AI-powered product launch.",
    "language": "en",
    "tone": "professional"
  }
}</pre>
                </div>
                <div class="genai-data-content" id="genai-data-request">
<pre>{
  "request_id": "REQ-2024-AI-789456",
  "model_selection": {
    "primary": "gpt-4-turbo",
    "fallback": "claude-3-opus"
  },
  "normalized_input": {
    "type": "TEXT_GENERATION",
    "task": "EMAIL_COMPOSITION"
  },
  "guardrails": {
    "content_filter": true,
    "pii_detection": true
  }
}</pre>
                </div>
                <div class="genai-data-content" id="genai-data-response">
<pre>{
  "response_id": "RESP-2024-AI-789456",
  "model_used": "gpt-4-turbo",
  "processing_time_ms": 2340,
  "tokens_used": { "prompt": 245, "completion": 387 },
  "generated_content": {
    "subject": " Introducing TeX AI Assistant",
    "body": "Dear Valued Customer,\n\nWe're thrilled to announce the launch of TeX AI Assistant!"
  },
  "quality_scores": { "relevance": 0.94, "coherence": 0.97 }
}</pre>
                </div>
                <div class="genai-data-content" id="genai-data-output">
<pre>{
  "distribution_id": "DIST-2024-789456",
  "topic": "ai.responses",
  "channels_notified": 5,
  "formatted_outputs": {
    "cms": { "status": "published" },
    "email": { "recipients_queued": 15420 },
    "chat": { "streamed": true },
    "analytics": { "logged": true },
    "vector_db": { "indexed": true }
  }
}</pre>
                </div>
            </div>
        </div>
        <!-- End GenAI Demo Content -->

        <!-- Vibe Coding Demo Content -->
        <div class="demo-content" id="demo-vibe">
            <div class="demo-title">
                <h2> Vibe Coding - Build Integrations with Natural Language</h2>
                <p>Describe what you want in plain English  TeX generates production-ready integration code</p>
            </div>

            <!-- Main Builder Layout -->
            <div class="vibe-builder-layout">
                <!-- Chat Panel -->
                <div class="vibe-chat-panel">
                    <div class="vibe-chat-header">
                        <span class="vibe-chat-header-icon"></span>
                        <h3>Integration Assistant</h3>
                        <span>Powered by TeX AI</span>
                    </div>
                    <div class="vibe-chat-messages" id="vibeChatMessages">
                        <div class="vibe-message assistant">
                            <span class="icon"></span>
                            Hi! I'm your TeX Integration Assistant. Describe the integration you want to build in plain English, and I'll generate the code for you.
                        </div>
                    </div>
                    <div class="vibe-chat-input-area">
                        <input type="text" class="vibe-chat-input" id="vibeChatInput" placeholder="Describe your integration... (e.g., 'Connect Salesforce to SAP')" onkeypress="vibeHandleKeyPress(event)">
                        <button class="vibe-send-btn" onclick="vibeSendMessage()">Send </button>
                    </div>
                </div>

                <!-- Code Panel -->
                <div class="vibe-code-panel">
                    <div class="vibe-code-header">
                        <div class="vibe-code-dot red"></div>
                        <div class="vibe-code-dot yellow"></div>
                        <div class="vibe-code-dot green"></div>
                        <div class="vibe-code-tabs">
                            <button class="vibe-code-tab active" onclick="vibeShowCodeTab('flow', event)">Flow.java</button>
                            <button class="vibe-code-tab" onclick="vibeShowCodeTab('config', event)">module.xml</button>
                            <button class="vibe-code-tab" onclick="vibeShowCodeTab('test', event)">FlowTest.java</button>
                        </div>
                    </div>
                    <div class="vibe-code-content" id="vibeCodeContent">
                        <pre id="vibe-code-flow" class="active"><span class="comment">//  Your generated integration code will appear here</span>
<span class="comment">// Try one of the example prompts below or type your own!</span>

<span class="keyword">package</span> com.tex.integration;

<span class="annotation">@Flow</span>(<span class="string">"my-integration"</span>)
<span class="keyword">public class</span> <span class="type">MyIntegrationFlow</span> {

    <span class="comment">// Describe your integration in natural language</span>
    <span class="comment">// and watch the magic happen! </span>

}</pre>
                        <pre id="vibe-code-config" style="display:none;"><span class="comment">&lt;!-- Module configuration will be generated here --&gt;</span>

<span class="keyword">&lt;module</span> <span class="function">name</span>=<span class="string">"my-integration"</span><span class="keyword">&gt;</span>
    <span class="comment">&lt;!-- Components will be auto-configured --&gt;</span>
<span class="keyword">&lt;/module&gt;</span></pre>
                        <pre id="vibe-code-test" style="display:none;"><span class="comment">// Unit tests will be generated here</span>

<span class="keyword">package</span> com.tex.integration;

<span class="annotation">@Test</span>
<span class="keyword">public class</span> <span class="type">MyIntegrationFlowTest</span> {

    <span class="annotation">@Test</span>
    <span class="keyword">void</span> <span class="function">testFlow</span>() {
        <span class="comment">// Test cases auto-generated</span>
    }
}</pre>
                    </div>
                    <div class="vibe-code-status">
                        <div class="vibe-status-indicator">
                            <div class="vibe-status-dot"></div>
                            <span>Ready</span>
                        </div>
                        <span>|</span>
                        <span id="vibeCodeStats">Lines: 0 | Components: 0</span>
                    </div>
                </div>
            </div>

            <!-- Flow Preview -->
            <div class="vibe-flow-preview">
                <h3> Generated Integration Flow</h3>
                <div class="vibe-flow-diagram" id="vibeFlowDiagram">
                    <div class="vibe-flow-node source" id="vibe-node-source"> Source</div>
                    <div class="vibe-flow-arrow"></div>
                    <div class="vibe-flow-node process" id="vibe-node-process"> Process</div>
                    <div class="vibe-flow-arrow"></div>
                    <div class="vibe-flow-node target" id="vibe-node-target"> Target</div>
                </div>
            </div>

            <!-- Controls -->
            <div class="vibe-controls">
                <button class="vibe-btn vibe-btn-primary" onclick="vibeRunDemo()"> Run Demo Conversation</button>
                <button class="vibe-btn vibe-btn-secondary" onclick="vibeResetDemo()"> Reset</button>
                <button class="vibe-btn vibe-btn-secondary" onclick="vibeDeployFlow()"> Deploy to TeX</button>
            </div>

            <!-- Example Prompts -->
            <div class="vibe-example-prompts">
                <h3> Example Integration Prompts</h3>
                <div class="vibe-prompt-cards">
                    <div class="vibe-prompt-card" onclick="vibeUsePrompt('salesforce-sap')">
                        <h4> CRM to ERP</h4>
                        <p>"Connect Salesforce to SAP - when a new opportunity is won, create a sales order in SAP with customer and product details"</p>
                    </div>
                    <div class="vibe-prompt-card" onclick="vibeUsePrompt('file-db')">
                        <h4> File to Database</h4>
                        <p>"Watch an SFTP folder for CSV files, validate the data, transform to JSON, and insert into PostgreSQL database"</p>
                    </div>
                    <div class="vibe-prompt-card" onclick="vibeUsePrompt('api-queue')">
                        <h4> API to Queue</h4>
                        <p>"Create a REST API endpoint that receives orders, validates them against business rules, and publishes to a Kafka topic"</p>
                    </div>
                    <div class="vibe-prompt-card" onclick="vibeUsePrompt('event-notify')">
                        <h4> Event Notification</h4>
                        <p>"Monitor a database table for changes, when inventory drops below threshold, send email alerts and update Slack channel"</p>
                    </div>
                </div>
            </div>

            <!-- Legend -->
            <div class="vibe-legend">
                <div class="vibe-legend-item"><div class="vibe-legend-color" style="border-color: var(--vibe-blue); background: #eff6ff;"></div>Source System</div>
                <div class="vibe-legend-item"><div class="vibe-legend-color" style="border-color: var(--vibe-purple); background: #f5f3ff;"></div>Processing</div>
                <div class="vibe-legend-item"><div class="vibe-legend-color" style="border-color: var(--vibe-green); background: #f0fdf4;"></div>Target System</div>
                <div class="vibe-legend-item"><div class="vibe-legend-color" style="border-color: var(--vibe-orange); background: #fffbeb;"></div>TeX Platform</div>
            </div>
        </div>
        <!-- End Vibe Coding Demo Content -->
    </div>

    <script>
        let currentStep = 0;
        let demoInterval = null;

        const steps = [
            { comp: 'comp-bloomberg', arrow: null, stepNum: 1, status: ' Trade TRD-2024-001234 booked in Bloomberg TOMS - IRS USD 10MM Pay Fixed 3.75%' },
            { comp: 'comp-fix', arrow: 'arrow1', stepNum: 2, status: ' TeX FIX Consumer receives trade via FIX 4.4 protocol...' },
            { comp: 'comp-transformer', arrow: 'arrow2', stepNum: 3, status: ' FIXFpML Transformer: Converting to industry standard format...' },
            { comp: 'comp-producer-topic', arrow: 'arrow3', stepNum: 3, status: ' Topic Publisher: Publishing FpML to trade.fpml.topic...' },
            { comp: 'comp-topic', topic: true, stepNum: 4, status: ' Topic: trade.fpml.topic - Message published, notifying all subscribers...' },
            {
                parallel: true,
                flows: ['flow-murex', 'flow-gloss', 'flow-trax', 'flow-inventory'],
                consumers: ['comp-murex-consumer', 'comp-gloss-consumer', 'comp-trax-consumer', 'comp-inv-consumer'],
                stepNum: 4,
                status: ' All 4 Topic Subscribers receive FpML message simultaneously...'
            },
            {
                parallel: true,
                converters: ['comp-murex-converter', 'comp-gloss-converter', 'comp-trax-converter', 'comp-inv-converter'],
                stepNum: 5,
                status: ' Parallel Conversion: FpML  MxML | GlossXML | ARM/APA | JSON...'
            },
            {
                parallel: true,
                producers: ['comp-murex-producer', 'comp-gloss-producer', 'comp-trax-producer', 'comp-inv-producer'],
                stepNum: 6,
                status: ' All Producers publishing to downstream systems simultaneously...'
            }
        ];

        function startDemo() {
            resetDemo();
            currentStep = 0;
            demoInterval = setInterval(processStep, 1300);
        }

        function highlightComponents(compIds, color = 'rgba(0,120,212,0.6)') {
            compIds.forEach(id => {
                const comp = document.getElementById(id);
                if (comp) {
                    const box = comp.querySelector('.component-box') || comp;
                    box.classList.add('highlight');
                    box.style.boxShadow = `0 0 20px ${color}`;
                }
            });
        }

        function processStep() {
            if (currentStep >= steps.length) {
                clearInterval(demoInterval);
                document.getElementById('statusText').innerHTML = ' <span style="color: var(--downstream-color);">Trade flow complete! All 4 downstream systems updated via pub-sub.</span>';
                return;
            }

            const step = steps[currentStep];

            // Clear previous highlights
            document.querySelectorAll('.component-box, .topic-box').forEach(box => {
                box.classList.remove('highlight');
                box.style.boxShadow = '';
            });
            document.querySelectorAll('.subscriber-flow').forEach(flow => {
                flow.style.background = 'rgba(255,255,255,0.5)';
            });

            // Handle topic highlight
            if (step.topic) {
                const topic = document.getElementById(step.comp);
                if (topic) {
                    topic.classList.add('highlight');
                    topic.style.boxShadow = '0 0 25px rgba(92,45,145,0.8)';
                }
                // Animate subscription lines
                document.querySelectorAll('.sub-line').forEach((line, i) => {
                    setTimeout(() => {
                        line.style.background = '#8661c5';
                        line.style.boxShadow = '0 0 10px #8661c5';
                    }, i * 100);
                });
            }
            // Handle parallel steps
            else if (step.parallel) {
                if (step.flows) {
                    step.flows.forEach(flowId => {
                        const flow = document.getElementById(flowId);
                        if (flow) flow.style.background = 'rgba(0,120,212,0.1)';
                    });
                    highlightComponents(step.consumers, 'rgba(92,45,145,0.6)');
                }
                if (step.converters) {
                    highlightComponents(step.converters, 'rgba(0,120,212,0.6)');
                }
                if (step.producers) {
                    highlightComponents(step.producers, 'rgba(16,124,16,0.6)');
                }
            }
            // Handle single component
            else {
                const comp = document.getElementById(step.comp);
                if (comp) {
                    const box = comp.querySelector('.component-box') || comp;
                    box.classList.add('highlight');
                    box.style.boxShadow = '0 0 25px rgba(0,120,212,0.6)';
                }

                if (step.arrow) {
                    const arrow = document.getElementById(step.arrow);
                    if (arrow) {
                        arrow.classList.add('animate');
                        setTimeout(() => arrow.classList.remove('animate'), 500);
                    }
                }
            }

            // Update step indicators
            const stepEl = document.getElementById('step' + step.stepNum);
            if (stepEl && !stepEl.classList.contains('complete')) {
                document.querySelectorAll('.step.active').forEach(s => {
                    if (s.id !== 'step' + step.stepNum) {
                        s.classList.remove('active');
                        s.classList.add('complete');
                    }
                });
                stepEl.classList.add('active');
            }

            // Update status
            document.getElementById('statusText').textContent = step.status;

            currentStep++;
        }

        function resetDemo() {
            clearInterval(demoInterval);
            currentStep = 0;
            document.querySelectorAll('.component-box, .topic-box').forEach(box => {
                box.classList.remove('highlight');
                box.style.boxShadow = '';
            });
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active', 'complete');
            });
            document.querySelectorAll('.sub-line').forEach(line => {
                line.style.background = '#5c2d91';
                line.style.boxShadow = 'none';
            });
            document.querySelectorAll('.subscriber-flow').forEach(flow => {
                flow.style.background = 'rgba(255,255,255,0.5)';
            });
            document.getElementById('statusText').textContent = 'Ready to process trade...';
        }

        function showData(type) {
            const panel = document.getElementById('demo-trade-flow');
            panel.querySelectorAll('.data-tab').forEach(tab => tab.classList.remove('active'));
            panel.querySelectorAll('.data-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById('data-' + type).classList.add('active');
        }

        // Tab switching
        function switchDemo(demoId) {
            // Reset all demos
            resetDemo();
            resetSurvDemo();
            if (typeof resetRetailAnimation === 'function') resetRetailAnimation();
            if (typeof resetGenAIAnimation === 'function') resetGenAIAnimation();
            if (typeof vibeResetDemo === 'function') vibeResetDemo();

            // Update tabs
            document.querySelectorAll('.demo-tab').forEach(tab => tab.classList.remove('active'));
            event.target.closest('.demo-tab').classList.add('active');

            // Update content
            document.querySelectorAll('.demo-content').forEach(content => content.classList.remove('active'));
            document.getElementById('demo-' + demoId).classList.add('active');
        }

        // Surveillance Demo
        let survCurrentStep = 0;
        let survDemoInterval = null;

        const survSteps = [
            {
                comps: ['surv-trades', 'surv-orders', 'surv-market', 'surv-comms'],
                stepNum: 1,
                status: ' Ingesting real-time data: Trades, Orders, Market Data, Communications...'
            },
            {
                comp: 'surv-consumer',
                stepNum: 1,
                status: ' Multi-Source Consumer: Unified data ingestion from all sources...'
            },
            {
                comp: 'surv-normalizer',
                stepNum: 2,
                status: ' Data Normalizer: Standardizing formats, enriching with reference data...'
            },
            {
                comp: 'surv-correlator',
                stepNum: 3,
                status: ' Event Correlator: Linking related events across data sources...'
            },
            {
                comp: 'surv-topic',
                topic: true,
                stepNum: 3,
                status: ' Publishing correlated events to surveillance.events.topic...'
            },
            {
                parallel: true,
                consumers: ['surv-spoof-consumer', 'surv-layer-consumer', 'surv-insider-consumer', 'surv-wash-consumer'],
                flows: ['flow-spoofing', 'flow-layering', 'flow-insider', 'flow-wash'],
                stepNum: 4,
                status: ' All AI Detection Engines subscribing to event stream...'
            },
            {
                parallel: true,
                ais: ['surv-spoof-ai', 'surv-layer-ai', 'surv-insider-ai', 'surv-wash-ai'],
                stepNum: 4,
                status: ' AI Models analyzing: Spoofing | Layering | Insider Trading | Wash Trading...',
                addAlert: { severity: 'high', text: 'SPOOFING DETECTED: Trader TRD-001, AAPL - Large order cancelled, opposite trade executed', time: '14:30:05' }
            },
            {
                parallel: true,
                alerts: ['surv-spoof-alert', 'surv-layer-alert', 'surv-insider-alert', 'surv-wash-alert'],
                stepNum: 5,
                status: ' Alert Generation: Creating prioritized alerts with evidence...',
                addAlert: { severity: 'medium', text: 'LAYERING PATTERN: Trader TRD-003, MSFT - Multiple orders at different price levels', time: '14:30:08' }
            },
            {
                stepNum: 6,
                status: ' Alerts sent to Dashboard, Case Management, and Regulatory Reporting systems',
                addAlert: { severity: 'low', text: 'WASH TRADE REVIEW: Accounts ACC-101/ACC-102 - Cross-trade flagged for review', time: '14:30:12' }
            }
        ];

        function startSurvDemo() {
            resetSurvDemo();
            survCurrentStep = 0;
            survDemoInterval = setInterval(processSurvStep, 1500);
        }

        function processSurvStep() {
            if (survCurrentStep >= survSteps.length) {
                clearInterval(survDemoInterval);
                document.getElementById('survStatusText').innerHTML = ' <span style="color: #107c10;">Surveillance cycle complete! 3 alerts generated, 1 case created.</span>';
                return;
            }

            const step = survSteps[survCurrentStep];

            // Clear previous highlights in surveillance demo only
            const survContainer = document.getElementById('demo-surveillance');
            survContainer.querySelectorAll('.component-box, .topic-box').forEach(box => {
                box.classList.remove('highlight');
                box.style.boxShadow = '';
            });
            survContainer.querySelectorAll('.subscriber-flow').forEach(flow => {
                flow.style.background = 'rgba(255,255,255,0.5)';
            });

            // Handle multiple components (data sources)
            if (step.comps) {
                step.comps.forEach(id => {
                    const comp = document.getElementById(id);
                    if (comp) {
                        const box = comp.querySelector('.component-box');
                        if (box) {
                            box.classList.add('highlight');
                            box.style.boxShadow = '0 0 20px rgba(216,59,1,0.6)';
                        }
                    }
                });
            }
            // Handle topic
            else if (step.topic) {
                const topic = document.getElementById(step.comp);
                if (topic) {
                    topic.classList.add('highlight');
                    topic.style.boxShadow = '0 0 25px rgba(92,45,145,0.8)';
                }
            }
            // Handle parallel steps
            else if (step.parallel) {
                if (step.flows) {
                    step.flows.forEach(flowId => {
                        const flow = document.getElementById(flowId);
                        if (flow) flow.style.background = 'rgba(209,52,56,0.1)';
                    });
                }
                if (step.consumers) {
                    step.consumers.forEach(id => {
                        const comp = document.getElementById(id);
                        if (comp) {
                            const box = comp.querySelector('.component-box');
                            if (box) {
                                box.classList.add('highlight');
                                box.style.boxShadow = '0 0 20px rgba(92,45,145,0.6)';
                            }
                        }
                    });
                }
                if (step.ais) {
                    step.ais.forEach(id => {
                        const comp = document.getElementById(id);
                        if (comp) {
                            const box = comp.querySelector('.component-box');
                            if (box) {
                                box.classList.add('highlight');
                                box.style.boxShadow = '0 0 20px rgba(209,52,56,0.8)';
                            }
                        }
                    });
                }
                if (step.alerts) {
                    step.alerts.forEach(id => {
                        const comp = document.getElementById(id);
                        if (comp) {
                            const box = comp.querySelector('.component-box');
                            if (box) {
                                box.classList.add('highlight');
                                box.style.boxShadow = '0 0 20px rgba(209,52,56,0.8)';
                            }
                        }
                    });
                }
            }
            // Handle single component
            else if (step.comp) {
                const comp = document.getElementById(step.comp);
                if (comp) {
                    const box = comp.querySelector('.component-box') || comp;
                    box.classList.add('highlight');
                    box.style.boxShadow = '0 0 25px rgba(0,120,212,0.6)';
                }
            }

            // Add alert if specified
            if (step.addAlert) {
                addAlertToPanel(step.addAlert);
            }

            // Update step indicators
            const stepEl = document.getElementById('surv-step' + step.stepNum);
            if (stepEl && !stepEl.classList.contains('complete')) {
                survContainer.querySelectorAll('.step.active').forEach(s => {
                    if (s.id !== 'surv-step' + step.stepNum) {
                        s.classList.remove('active');
                        s.classList.add('complete');
                    }
                });
                stepEl.classList.add('active');
            }

            // Update status
            document.getElementById('survStatusText').textContent = step.status;

            survCurrentStep++;
        }

        function addAlertToPanel(alert) {
            const alertList = document.getElementById('alertList');
            // Clear placeholder if first alert
            if (alertList.querySelector('.alert-item[style*="italic"]')) {
                alertList.innerHTML = '';
            }

            const alertItem = document.createElement('div');
            alertItem.className = 'alert-item';
            alertItem.innerHTML = `
                <span class="alert-severity ${alert.severity}">${alert.severity.toUpperCase()}</span>
                <span>${alert.text}</span>
                <span class="alert-time">${alert.time}</span>
            `;
            alertList.appendChild(alertItem);
        }

        function resetSurvDemo() {
            clearInterval(survDemoInterval);
            survCurrentStep = 0;

            const survContainer = document.getElementById('demo-surveillance');
            if (survContainer) {
                survContainer.querySelectorAll('.component-box, .topic-box').forEach(box => {
                    box.classList.remove('highlight');
                    box.style.boxShadow = '';
                });
                survContainer.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('active', 'complete');
                });
                survContainer.querySelectorAll('.subscriber-flow').forEach(flow => {
                    flow.style.background = 'rgba(255,255,255,0.5)';
                });
            }

            const statusText = document.getElementById('survStatusText');
            if (statusText) {
                statusText.textContent = 'Ready to analyze trading activity...';
            }

            const alertList = document.getElementById('alertList');
            if (alertList) {
                alertList.innerHTML = `
                    <div class="alert-item" style="color: #605e5c; font-style: italic;">
                        No alerts detected. Run demo to see AI-powered detection in action.
                    </div>
                `;
            }
        }

        function showSurvData(type) {
            const panel = document.getElementById('demo-surveillance');
            panel.querySelectorAll('.data-tab').forEach(tab => tab.classList.remove('active'));
            panel.querySelectorAll('.data-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById('surv-data-' + type).classList.add('active');
        }

        // ===== RETAIL DEMO SCRIPTS =====
        let retailAnimationRunning = false;

        function retailUpdateStatus(message) {
            document.getElementById('retailStatusText').textContent = message;
        }

        function retailHighlightComponent(id) {
            const comp = document.querySelector(`#${id} .component-box`);
            if (comp) {
                comp.classList.add('highlight');
                setTimeout(() => comp.classList.remove('highlight'), 800);
            }
        }

        function retailActivateStep(stepNum) {
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById(`retail-step${i}`);
                step.classList.remove('active', 'complete');
                if (i < stepNum) step.classList.add('complete');
                else if (i === stepNum) step.classList.add('active');
            }
        }

        async function startRetailAnimation() {
            if (retailAnimationRunning) return;
            retailAnimationRunning = true;
            resetRetailAnimation();

            const channels = ['retail-comp-web', 'retail-comp-mobile', 'retail-comp-store', 'retail-comp-call', 'retail-comp-marketplace'];
            const randomChannel = channels[Math.floor(Math.random() * channels.length)];

            // Step 1: Order received
            retailActivateStep(1);
            retailHighlightComponent(randomChannel);
            retailUpdateStatus(' Order received from ' + randomChannel.replace('retail-comp-', '').toUpperCase() + ' channel...');
            await retailSleep(1200);

            // Step 2: Normalize & Validate
            retailActivateStep(2);
            retailHighlightComponent('retail-comp-consumer');
            retailUpdateStatus(' Ingesting order via multi-channel API...');
            await retailSleep(800);
            retailHighlightComponent('retail-comp-normalizer');
            retailUpdateStatus(' Normalizing order to unified format...');
            await retailSleep(800);
            retailHighlightComponent('retail-comp-validator');
            retailUpdateStatus(' Validating order against business rules...');
            await retailSleep(800);

            // Step 3: Enrich
            retailActivateStep(3);
            retailHighlightComponent('retail-comp-enricher');
            retailUpdateStatus(' Enriching with customer profile and product data...');
            await retailSleep(1000);

            // Step 4: Publish
            retailActivateStep(4);
            document.getElementById('retail-order-topic').style.boxShadow = '0 0 25px rgba(46,204,113,0.6)';
            retailUpdateStatus(' Publishing validated order to orders.validated topic...');
            await retailSleep(1000);

            // Step 5: Parallel processing
            retailActivateStep(5);
            retailUpdateStatus(' Parallel distribution to all subscribers...');
            document.querySelectorAll('.retail-subscriber-flow .component-box').forEach((box, i) => {
                setTimeout(() => box.classList.add('highlight'), i * 150);
                setTimeout(() => box.classList.remove('highlight'), i * 150 + 800);
            });
            await retailSleep(1500);

            // Step 6: Complete
            retailActivateStep(6);
            document.getElementById('retail-order-topic').style.boxShadow = '';
            retailUpdateStatus(' Order ORD-2024-789456 successfully processed and distributed to all systems!');
            retailAnimationRunning = false;
        }

        function resetRetailAnimation() {
            retailAnimationRunning = false;
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById(`retail-step${i}`);
                if (step) step.classList.remove('active', 'complete');
            }
            const retailContainer = document.getElementById('demo-retail');
            if (retailContainer) {
                retailContainer.querySelectorAll('.component-box').forEach(box => box.classList.remove('highlight'));
            }
            const topic = document.getElementById('retail-order-topic');
            if (topic) topic.style.boxShadow = '';
            retailUpdateStatus('Ready to process order...');
        }

        function retailSleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function showRetailData(tabName) {
            const panel = document.getElementById('demo-retail');
            panel.querySelectorAll('.retail-data-tab').forEach(tab => tab.classList.remove('active'));
            panel.querySelectorAll('.retail-data-content').forEach(content => content.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`retail-data-${tabName}`).classList.add('active');
        }

        // ===== GENAI DEMO SCRIPTS =====
        let genaiAnimationRunning = false;

        function genaiUpdateStatus(message) {
            document.getElementById('genaiStatusText').textContent = message;
        }

        function genaiHighlightComponent(id) {
            const comp = document.querySelector(`#${id} .genai-component-box`);
            if (comp) {
                comp.classList.add('highlight');
                setTimeout(() => comp.classList.remove('highlight'), 800);
            }
        }

        function genaiHighlightModel(id) {
            const model = document.getElementById(id);
            if (model) {
                model.classList.add('highlight');
                setTimeout(() => model.classList.remove('highlight'), 1200);
            }
        }

        function genaiActivateStep(stepNum) {
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById(`genai-step${i}`);
                if (step) {
                    step.classList.remove('active', 'complete');
                    if (i < stepNum) step.classList.add('complete');
                    else if (i === stepNum) step.classList.add('active');
                }
            }
        }

        async function startGenAIAnimation() {
            if (genaiAnimationRunning) return;
            genaiAnimationRunning = true;
            resetGenAIAnimation();

            const inputs = ['genai-comp-text', 'genai-comp-image', 'genai-comp-audio', 'genai-comp-doc'];
            const models = ['genai-model-gpt', 'genai-model-dalle', 'genai-model-whisper', 'genai-model-embed'];
            const randomInput = inputs[Math.floor(Math.random() * inputs.length)];
            const randomModel = models[Math.floor(Math.random() * models.length)];

            // Step 1: Input received
            genaiActivateStep(1);
            genaiHighlightComponent(randomInput);
            const inputType = randomInput.replace('genai-comp-', '').toUpperCase();
            genaiUpdateStatus(` ${inputType} input received from user...`);
            await genaiSleep(1200);

            // Step 2: Pre-process
            genaiActivateStep(2);
            genaiHighlightComponent('genai-comp-ingest');
            genaiUpdateStatus(' Ingesting multi-modal input...');
            await genaiSleep(800);
            genaiHighlightComponent('genai-comp-preprocess');
            genaiUpdateStatus(' Pre-processing and normalizing input...');
            await genaiSleep(800);

            // Step 3: Route to model
            genaiActivateStep(3);
            genaiHighlightComponent('genai-comp-router');
            genaiUpdateStatus(' Analyzing request and selecting optimal AI model...');
            await genaiSleep(1000);

            // Step 4: Generate response
            genaiActivateStep(4);
            genaiHighlightModel(randomModel);
            const modelName = randomModel === 'genai-model-gpt' ? 'GPT-4' :
                             randomModel === 'genai-model-dalle' ? 'DALL-E' :
                             randomModel === 'genai-model-whisper' ? 'Whisper' : 'Embeddings';
            genaiUpdateStatus(` ${modelName} processing request...`);
            await genaiSleep(1500);
            genaiUpdateStatus(` ${modelName} generating response...`);
            await genaiSleep(1000);

            // Step 5: Publish to topic
            genaiActivateStep(5);
            document.getElementById('genai-ai-topic').style.boxShadow = '0 0 25px rgba(124,58,237,0.6)';
            genaiUpdateStatus(' Publishing AI response to ai.responses topic...');
            await genaiSleep(1000);

            // Step 6: Distribute
            genaiActivateStep(6);
            genaiUpdateStatus(' Distributing to all subscriber channels...');
            document.querySelectorAll('.genai-subscriber-flow .genai-component-box').forEach((box, i) => {
                setTimeout(() => box.classList.add('highlight'), i * 100);
                setTimeout(() => box.classList.remove('highlight'), i * 100 + 800);
            });
            await genaiSleep(1500);

            document.getElementById('genai-ai-topic').style.boxShadow = '';
            genaiUpdateStatus(' AI workflow complete! Response delivered to 5 channels in 2.34 seconds');
            genaiAnimationRunning = false;
        }

        function resetGenAIAnimation() {
            genaiAnimationRunning = false;
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById(`genai-step${i}`);
                if (step) step.classList.remove('active', 'complete');
            }
            const genaiContainer = document.getElementById('demo-genai');
            if (genaiContainer) {
                genaiContainer.querySelectorAll('.genai-component-box').forEach(box => box.classList.remove('highlight'));
                genaiContainer.querySelectorAll('.genai-model-card').forEach(card => card.classList.remove('highlight'));
            }
            const topic = document.getElementById('genai-ai-topic');
            if (topic) topic.style.boxShadow = '';
            genaiUpdateStatus('Ready to process AI request...');
        }

        function genaiSleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function showGenAIData(tabName) {
            const panel = document.getElementById('demo-genai');
            panel.querySelectorAll('.genai-data-tab').forEach(tab => tab.classList.remove('active'));
            panel.querySelectorAll('.genai-data-content').forEach(content => content.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`genai-data-${tabName}`).classList.add('active');
        }

        // ==================== VIBE CODING DEMO ====================
        const vibePrompts = {
            'salesforce-sap': {
                userMessage: "Connect Salesforce to SAP - when a new opportunity is won, create a sales order in SAP with customer and product details",
                flow: [
                    { name: " Salesforce", type: "source" },
                    { name: " Filter Won", type: "process" },
                    { name: " Transform", type: "process" },
                    { name: " Validate", type: "process" },
                    { name: " SAP S/4HANA", type: "target" }
                ],
                code: `<span class="keyword">package</span> com.tex.integration.crm;

<span class="annotation">@Flow</span>(<span class="string">"salesforce-to-sap-orders"</span>)
<span class="annotation">@Description</span>(<span class="string">"Sync won opportunities from Salesforce to SAP Sales Orders"</span>)
<span class="keyword">public class</span> <span class="type">SalesforceToSapFlow</span> {

    <span class="annotation">@Consumer</span>(type = <span class="type">SalesforceConsumer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(sobject = <span class="string">"Opportunity"</span>, event = <span class="string">"UPDATED"</span>)
    <span class="keyword">private</span> <span class="type">Consumer</span> salesforceConsumer;

    <span class="annotation">@Filter</span>
    <span class="keyword">public boolean</span> <span class="function">filterWonOpportunities</span>(<span class="type">Opportunity</span> opp) {
        <span class="keyword">return</span> <span class="string">"Closed Won"</span>.equals(opp.getStageName());
    }

    <span class="annotation">@Converter</span>
    <span class="keyword">public</span> <span class="type">SapSalesOrder</span> <span class="function">transformToSalesOrder</span>(<span class="type">Opportunity</span> opp) {
        <span class="keyword">return</span> <span class="type">SapSalesOrder</span>.builder()
            .customerId(opp.getAccountId())
            .orderDate(<span class="type">LocalDate</span>.now())
            .totalAmount(opp.getAmount())
            .build();
    }

    <span class="annotation">@Producer</span>(type = <span class="type">SapProducer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(bapi = <span class="string">"BAPI_SALESORDER_CREATEFROMDAT2"</span>)
    <span class="keyword">private</span> <span class="type">Producer</span> sapProducer;
}`,
                config: `<span class="keyword">&lt;module</span> <span class="function">name</span>=<span class="string">"salesforce-to-sap-orders"</span><span class="keyword">&gt;</span>
    <span class="keyword">&lt;flow</span> <span class="function">name</span>=<span class="string">"opportunity-sync"</span><span class="keyword">&gt;</span>
        <span class="keyword">&lt;consumer</span> <span class="function">type</span>=<span class="string">"salesforce"</span><span class="keyword">&gt;</span>
            <span class="keyword">&lt;property</span> <span class="function">name</span>=<span class="string">"sobject"</span><span class="keyword">&gt;</span>Opportunity<span class="keyword">&lt;/property&gt;</span>
        <span class="keyword">&lt;/consumer&gt;</span>
        <span class="keyword">&lt;filter</span> <span class="function">ref</span>=<span class="string">"wonOpportunityFilter"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;converter</span> <span class="function">ref</span>=<span class="string">"opportunityToSalesOrderConverter"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;producer</span> <span class="function">type</span>=<span class="string">"sap-rfc"</span><span class="keyword">&gt;</span>
            <span class="keyword">&lt;property</span> <span class="function">name</span>=<span class="string">"bapi"</span><span class="keyword">&gt;</span>BAPI_SALESORDER_CREATEFROMDAT2<span class="keyword">&lt;/property&gt;</span>
        <span class="keyword">&lt;/producer&gt;</span>
    <span class="keyword">&lt;/flow&gt;</span>
<span class="keyword">&lt;/module&gt;</span>`,
                test: `<span class="keyword">package</span> com.tex.integration.crm;

<span class="annotation">@ExtendWith</span>(<span class="type">TexTestExtension</span>.<span class="keyword">class</span>)
<span class="keyword">class</span> <span class="type">SalesforceToSapFlowTest</span> {

    <span class="annotation">@InjectFlow</span>
    <span class="keyword">private</span> <span class="type">SalesforceToSapFlow</span> flow;

    <span class="annotation">@Test</span>
    <span class="keyword">void</span> <span class="function">shouldCreateSalesOrderForWonOpportunity</span>() {
        <span class="type">Opportunity</span> wonOpp = <span class="type">TestDataBuilder</span>.opportunity()
            .stageName(<span class="string">"Closed Won"</span>).amount(<span class="number">50000.00</span>).build();
        <span class="type">FlowResult</span> result = flow.process(wonOpp);
        assertThat(result.isSuccess()).isTrue();
    }
}`,
                stats: "Lines: 38 | Components: 5"
            },
            'file-db': {
                userMessage: "Watch an SFTP folder for CSV files, validate the data, transform to JSON, and insert into PostgreSQL database",
                flow: [
                    { name: " SFTP", type: "source" },
                    { name: " Parse CSV", type: "process" },
                    { name: " Validate", type: "process" },
                    { name: " To JSON", type: "process" },
                    { name: " PostgreSQL", type: "target" }
                ],
                code: `<span class="keyword">package</span> com.tex.integration.etl;

<span class="annotation">@Flow</span>(<span class="string">"sftp-csv-to-postgres"</span>)
<span class="annotation">@Scheduled</span>(cron = <span class="string">"0 */5 * * * *"</span>)
<span class="keyword">public class</span> <span class="type">SftpCsvToPostgresFlow</span> {

    <span class="annotation">@Consumer</span>(type = <span class="type">SftpConsumer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(host = <span class="string">"\${sftp.host}"</span>, directory = <span class="string">"/incoming/data"</span>, filePattern = <span class="string">"*.csv"</span>)
    <span class="keyword">private</span> <span class="type">Consumer</span> sftpConsumer;

    <span class="annotation">@Converter</span>
    <span class="keyword">public</span> <span class="type">List</span>&lt;<span class="type">DataRecord</span>&gt; <span class="function">parseCsv</span>(<span class="type">InputStream</span> file) {
        <span class="keyword">return</span> <span class="type">CsvParser</span>.builder().withHeader(<span class="keyword">true</span>).parse(file, <span class="type">DataRecord</span>.<span class="keyword">class</span>);
    }

    <span class="annotation">@Producer</span>(type = <span class="type">JdbcProducer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(datasource = <span class="string">"postgresDS"</span>, sql = <span class="string">"INSERT INTO data_records..."</span>)
    <span class="keyword">private</span> <span class="type">Producer</span> postgresProducer;
}`,
                config: `<span class="keyword">&lt;module</span> <span class="function">name</span>=<span class="string">"sftp-csv-to-postgres"</span><span class="keyword">&gt;</span>
    <span class="keyword">&lt;flow</span> <span class="function">name</span>=<span class="string">"csv-import"</span> <span class="function">scheduled</span>=<span class="string">"true"</span><span class="keyword">&gt;</span>
        <span class="keyword">&lt;consumer</span> <span class="function">type</span>=<span class="string">"sftp"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;converter</span> <span class="function">ref</span>=<span class="string">"csvParser"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;producer</span> <span class="function">type</span>=<span class="string">"jdbc"</span><span class="keyword">/&gt;</span>
    <span class="keyword">&lt;/flow&gt;</span>
<span class="keyword">&lt;/module&gt;</span>`,
                test: `<span class="keyword">package</span> com.tex.integration.etl;

<span class="annotation">@ExtendWith</span>(<span class="type">TexTestExtension</span>.<span class="keyword">class</span>)
<span class="keyword">class</span> <span class="type">SftpCsvToPostgresFlowTest</span> {

    <span class="annotation">@Test</span>
    <span class="keyword">void</span> <span class="function">shouldParseCsvAndInsertToDatabase</span>() {
        <span class="type">String</span> csvContent = <span class="string">"id,name\\n1,John"</span>;
        <span class="type">FlowResult</span> result = flow.process(csvContent);
        assertThat(result.isSuccess()).isTrue();
    }
}`,
                stats: "Lines: 42 | Components: 5"
            },
            'api-queue': {
                userMessage: "Create a REST API endpoint that receives orders, validates them against business rules, and publishes to a Kafka topic",
                flow: [
                    { name: " REST API", type: "source" },
                    { name: " Validate", type: "process" },
                    { name: " Enrich", type: "process" },
                    { name: " Kafka", type: "target" }
                ],
                code: `<span class="keyword">package</span> com.tex.integration.api;

<span class="annotation">@Flow</span>(<span class="string">"order-api-to-kafka"</span>)
<span class="keyword">public class</span> <span class="type">OrderApiToKafkaFlow</span> {

    <span class="annotation">@Consumer</span>(type = <span class="type">RestConsumer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(path = <span class="string">"/api/v1/orders"</span>, method = <span class="string">"POST"</span>)
    <span class="keyword">private</span> <span class="type">Consumer</span> restConsumer;

    <span class="annotation">@Validator</span>
    <span class="keyword">public void</span> <span class="function">validateOrder</span>(<span class="type">Order</span> order) {
        <span class="type">ValidationUtils</span>.requireNonNull(order.getCustomerId(), <span class="string">"Customer ID"</span>);
        <span class="keyword">if</span> (order.getTotalAmount() < <span class="number">10.00</span>)
            <span class="keyword">throw new</span> <span class="type">ValidationException</span>(<span class="string">"Min order value is $10"</span>);
    }

    <span class="annotation">@Producer</span>(type = <span class="type">KafkaProducer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(topic = <span class="string">"orders.received"</span>)
    <span class="keyword">private</span> <span class="type">Producer</span> kafkaProducer;
}`,
                config: `<span class="keyword">&lt;module</span> <span class="function">name</span>=<span class="string">"order-api-to-kafka"</span><span class="keyword">&gt;</span>
    <span class="keyword">&lt;flow</span> <span class="function">name</span>=<span class="string">"order-ingestion"</span><span class="keyword">&gt;</span>
        <span class="keyword">&lt;consumer</span> <span class="function">type</span>=<span class="string">"rest"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;validator</span> <span class="function">ref</span>=<span class="string">"orderValidator"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;producer</span> <span class="function">type</span>=<span class="string">"kafka"</span><span class="keyword">/&gt;</span>
    <span class="keyword">&lt;/flow&gt;</span>
<span class="keyword">&lt;/module&gt;</span>`,
                test: `<span class="keyword">package</span> com.tex.integration.api;

<span class="annotation">@Test</span>
<span class="keyword">void</span> <span class="function">shouldPublishValidOrderToKafka</span>() {
    <span class="type">Order</span> order = <span class="type">Order</span>.builder()
        .customerId(<span class="string">"CUST-123"</span>).totalAmount(<span class="number">99.99</span>).build();
    assertThat(flow.process(order).isSuccess()).isTrue();
}`,
                stats: "Lines: 36 | Components: 4"
            },
            'event-notify': {
                userMessage: "Monitor a database table for changes, when inventory drops below threshold, send email alerts and update Slack channel",
                flow: [
                    { name: " DB Monitor", type: "source" },
                    { name: " Check Level", type: "process" },
                    { name: " Email", type: "target" },
                    { name: " Slack", type: "target" }
                ],
                code: `<span class="keyword">package</span> com.tex.integration.alerts;

<span class="annotation">@Flow</span>(<span class="string">"inventory-alert-flow"</span>)
<span class="annotation">@Scheduled</span>(cron = <span class="string">"0 */15 * * * *"</span>)
<span class="keyword">public class</span> <span class="type">InventoryAlertFlow</span> {

    <span class="annotation">@Value</span>(<span class="string">"\${inventory.threshold:100}"</span>)
    <span class="keyword">private int</span> threshold;

    <span class="annotation">@Consumer</span>(type = <span class="type">JdbcConsumer</span>.<span class="keyword">class</span>)
    <span class="annotation">@Endpoint</span>(sql = <span class="string">"SELECT * FROM inventory WHERE quantity < :threshold"</span>)
    <span class="keyword">private</span> <span class="type">Consumer</span> dbConsumer;

    <span class="annotation">@MultiRecipientRouter</span>
    <span class="keyword">public</span> <span class="type">List</span>&lt;<span class="type">String</span>&gt; <span class="function">routeAlert</span>(<span class="type">AlertMessage</span> alert) {
        <span class="keyword">return</span> <span class="type">List</span>.of(<span class="string">"email-producer"</span>, <span class="string">"slack-producer"</span>);
    }

    <span class="annotation">@Producer</span>(name = <span class="string">"email-producer"</span>, type = <span class="type">SmtpProducer</span>.<span class="keyword">class</span>)
    <span class="keyword">private</span> <span class="type">Producer</span> emailProducer;

    <span class="annotation">@Producer</span>(name = <span class="string">"slack-producer"</span>, type = <span class="type">SlackProducer</span>.<span class="keyword">class</span>)
    <span class="keyword">private</span> <span class="type">Producer</span> slackProducer;
}`,
                config: `<span class="keyword">&lt;module</span> <span class="function">name</span>=<span class="string">"inventory-alert-flow"</span><span class="keyword">&gt;</span>
    <span class="keyword">&lt;flow</span> <span class="function">name</span>=<span class="string">"low-stock-alerts"</span> <span class="function">scheduled</span>=<span class="string">"true"</span><span class="keyword">&gt;</span>
        <span class="keyword">&lt;consumer</span> <span class="function">type</span>=<span class="string">"jdbc"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;router</span> <span class="function">type</span>=<span class="string">"multi-recipient"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;producer</span> <span class="function">name</span>=<span class="string">"email-producer"</span> <span class="function">type</span>=<span class="string">"smtp"</span><span class="keyword">/&gt;</span>
        <span class="keyword">&lt;producer</span> <span class="function">name</span>=<span class="string">"slack-producer"</span> <span class="function">type</span>=<span class="string">"slack"</span><span class="keyword">/&gt;</span>
    <span class="keyword">&lt;/flow&gt;</span>
<span class="keyword">&lt;/module&gt;</span>`,
                test: `<span class="keyword">package</span> com.tex.integration.alerts;

<span class="annotation">@Test</span>
<span class="keyword">void</span> <span class="function">shouldSendAlertForLowInventory</span>() {
    <span class="type">InventoryItem</span> lowItem = <span class="type">InventoryItem</span>.builder()
        .sku(<span class="string">"SKU-001"</span>).quantity(<span class="number">50</span>).build();
    assertThat(flow.process(lowItem).getProducersInvoked())
        .contains(<span class="string">"email-producer"</span>, <span class="string">"slack-producer"</span>);
}`,
                stats: "Lines: 45 | Components: 5"
            }
        };

        let vibeIsProcessing = false;

        function vibeHandleKeyPress(event) {
            if (event.key === 'Enter' && !vibeIsProcessing) {
                vibeSendMessage();
            }
        }

        function vibeSendMessage() {
            const input = document.getElementById('vibeChatInput');
            const message = input.value.trim();
            if (!message || vibeIsProcessing) return;

            vibeAddMessage(message, 'user');
            input.value = '';
            vibeShowTypingIndicator();
            vibeIsProcessing = true;

            setTimeout(() => {
                vibeHideTypingIndicator();
                vibeProcessUserMessage(message);
                vibeIsProcessing = false;
            }, 1500);
        }

        function vibeAddMessage(text, type) {
            const container = document.getElementById('vibeChatMessages');
            const msg = document.createElement('div');
            msg.className = `vibe-message ${type}`;
            if (type === 'assistant') {
                msg.innerHTML = `<span class="icon"></span>${text}`;
            } else {
                msg.textContent = text;
            }
            container.appendChild(msg);
            container.scrollTop = container.scrollHeight;
        }

        function vibeShowTypingIndicator() {
            const container = document.getElementById('vibeChatMessages');
            const indicator = document.createElement('div');
            indicator.className = 'vibe-typing-indicator';
            indicator.id = 'vibeTypingIndicator';
            indicator.innerHTML = '<span></span><span></span><span></span>';
            container.appendChild(indicator);
            container.scrollTop = container.scrollHeight;
        }

        function vibeHideTypingIndicator() {
            const indicator = document.getElementById('vibeTypingIndicator');
            if (indicator) indicator.remove();
        }

        function vibeProcessUserMessage(message) {
            let matchedPrompt = null;
            const lowerMessage = message.toLowerCase();

            if (lowerMessage.includes('salesforce') || lowerMessage.includes('sap') || lowerMessage.includes('crm')) {
                matchedPrompt = vibePrompts['salesforce-sap'];
            } else if (lowerMessage.includes('sftp') || lowerMessage.includes('csv') || lowerMessage.includes('file')) {
                matchedPrompt = vibePrompts['file-db'];
            } else if (lowerMessage.includes('api') || lowerMessage.includes('rest') || lowerMessage.includes('kafka')) {
                matchedPrompt = vibePrompts['api-queue'];
            } else if (lowerMessage.includes('monitor') || lowerMessage.includes('alert') || lowerMessage.includes('email') || lowerMessage.includes('slack')) {
                matchedPrompt = vibePrompts['event-notify'];
            }

            if (matchedPrompt) {
                vibeGenerateIntegration(matchedPrompt);
            } else {
                vibeAddMessage("I understand you want to build an integration. Let me analyze your requirements and generate the code...", 'assistant');
                setTimeout(() => {
                    vibeAddMessage(" I've created a basic integration flow template. Try one of the example prompts below for a more specific implementation!", 'assistant');
                }, 1000);
            }
        }

        function vibeGenerateIntegration(promptData) {
            vibeAddMessage("I understand! Let me generate that integration for you...", 'assistant');

            setTimeout(() => {
                vibeUpdateFlowDiagram(promptData.flow);
                document.getElementById('vibe-code-flow').innerHTML = promptData.code;
                document.getElementById('vibe-code-config').innerHTML = promptData.config;
                document.getElementById('vibe-code-test').innerHTML = promptData.test;
                document.getElementById('vibeCodeStats').textContent = promptData.stats;

                vibeAddMessage(" Done! I've generated:<br> <strong>Flow.java</strong> - Main integration logic<br> <strong>module.xml</strong> - Configuration<br> <strong>FlowTest.java</strong> - Unit tests<br><br>Click 'Deploy to TeX' when ready!", 'assistant');
            }, 1000);
        }

        function vibeUpdateFlowDiagram(flowNodes) {
            const diagram = document.getElementById('vibeFlowDiagram');
            diagram.innerHTML = '';

            flowNodes.forEach((node, index) => {
                const nodeEl = document.createElement('div');
                nodeEl.className = `vibe-flow-node ${node.type}`;
                nodeEl.textContent = node.name;
                nodeEl.id = `vibe-flow-node-${index}`;
                diagram.appendChild(nodeEl);

                if (index < flowNodes.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'vibe-flow-arrow';
                    arrow.textContent = '';
                    diagram.appendChild(arrow);
                }
            });

            flowNodes.forEach((_, index) => {
                setTimeout(() => {
                    const node = document.getElementById(`vibe-flow-node-${index}`);
                    if (node) node.classList.add('highlight');
                    setTimeout(() => node?.classList.remove('highlight'), 500);
                }, index * 300);
            });
        }

        function vibeUsePrompt(promptKey) {
            const promptData = vibePrompts[promptKey];
            if (promptData) {
                document.getElementById('vibeChatInput').value = promptData.userMessage;
                vibeSendMessage();
            }
        }

        function vibeShowCodeTab(tabName, event) {
            document.querySelectorAll('#demo-vibe .vibe-code-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('#vibeCodeContent pre').forEach(pre => pre.style.display = 'none');

            event.target.classList.add('active');
            document.getElementById(`vibe-code-${tabName}`).style.display = 'block';
        }

        async function vibeRunDemo() {
            vibeResetDemo();
            await vibeSleep(500);

            vibeAddMessage("Connect Salesforce to SAP - when a new opportunity is won, create a sales order in SAP with customer and product details", 'user');
            vibeShowTypingIndicator();
            await vibeSleep(2000);
            vibeHideTypingIndicator();

            vibeGenerateIntegration(vibePrompts['salesforce-sap']);
        }

        function vibeResetDemo() {
            const container = document.getElementById('vibeChatMessages');
            container.innerHTML = `
                <div class="vibe-message assistant">
                    <span class="icon"></span>
                    Hi! I'm your TeX Integration Assistant. Describe the integration you want to build in plain English, and I'll generate the code for you.
                </div>
            `;

            document.getElementById('vibe-code-flow').innerHTML = `<span class="comment">//  Your generated integration code will appear here</span>
<span class="comment">// Try one of the example prompts below or type your own!</span>

<span class="keyword">package</span> com.tex.integration;

<span class="annotation">@Flow</span>(<span class="string">"my-integration"</span>)
<span class="keyword">public class</span> <span class="type">MyIntegrationFlow</span> {

    <span class="comment">// Describe your integration in natural language</span>
    <span class="comment">// and watch the magic happen! </span>

}`;
            document.getElementById('vibeCodeStats').textContent = 'Lines: 0 | Components: 0';

            document.getElementById('vibeFlowDiagram').innerHTML = `
                <div class="vibe-flow-node source" id="vibe-node-source"> Source</div>
                <div class="vibe-flow-arrow"></div>
                <div class="vibe-flow-node process" id="vibe-node-process"> Process</div>
                <div class="vibe-flow-arrow"></div>
                <div class="vibe-flow-node target" id="vibe-node-target"> Target</div>
            `;
        }

        function vibeDeployFlow() {
            vibeAddMessage(" Deploying integration to TeX platform...", 'assistant');
            setTimeout(() => {
                vibeAddMessage(" <strong>Deployment successful!</strong><br> Module registered<br> Flow status: RUNNING<br> Dashboard: <a href='#'>View in TeX Console </a>", 'assistant');
            }, 2000);
        }

        function vibeSleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>

